(this.webpackJsonpfront_end=this.webpackJsonpfront_end||[]).push([[0],{135:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(68),o=a.n(s),l=(a(79),a(2)),i=a(3),c=a(5),u=a(4),d=a(137),h=a(1),m=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(l.a)(this,a),(e=t.call(this)).state={},e}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{style:{backgroundColor:"#F9F9F9",padding:1,width:"100%",height:this.props.height+200}},this.props.children)}}]),a}(n.Component),p=a(12),y=Object(p.a)(),v=function(e,t,a,n){e.push({pathname:t,fromPath:a,state:n})},g=a(34),f=a.n(g),E=a(69),b=a(39),C=function(){var e=Object(E.a)(f.a.mark((function e(t,a,n,r){var s,o;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s={hostname:"localhost",port:8443,path:t,method:a,headers:{"Accept-Encoding":"gzip, deflate, br","Content-Length":n.length}},(o=b.request(s,(function(e){e.on("data",(function(e){r(S(e))}))}))).write(JSON.stringify(n)+"\n"),o.end();case 4:case"end":return e.stop()}}),e)})));return function(t,a,n,r){return e.apply(this,arguments)}}(),S=function(e){var t=e.toString();return JSON.parse(t)},k=a(70),P=a.n(k),A=a(129),O=null;function _(e,t){var a=new P.a("https://localhost:8443/gs-guide-websocket");(O=A.over(a)).connect({id:e},(function(e){var a;O.subscribe("/user/queue/greetings",(function(e){var a=e.body,n=JSON.parse(a);console.log("object "+n),t(n)})),a="hey",O.send("/app/hello",{},a)}),(function(e){return alert(e.code)}))}var x=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(l.a)(this,a),(e=t.call(this)).state={color:"#4287FF"},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{style:{textAlign:"center",margin:10}},r.a.createElement("button",{style:{textAlign:"center",color:"black",backgroundColor:this.state.color,padding:"10px",fontFamily:"Arial",fontSize:14,border:"1px solid black"},onMouseDown:function(t){e.setState({color:"white"})},onMouseUp:function(t){e.setState({color:"#4287FF"})},onClick:this.props.onClick}," ",this.props.text," "))}}]),a}(n.Component),D=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement("h2",{style:w},this.props.title)}}]),a}(n.Component),w={textAlign:"center",color:"black",backgroundColor:"#F3F3F3",paddingTop:"20px",paddingBottom:"7px",fontFamily:"Arial",width:"99%"},j=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(l.a)(this,a),(e=t.call(this)).state={hoverd:!1},e}return Object(i.a)(a,[{key:"getStyle",value:function(){return this.state.hoverd?{backgroundColor:"#92BAFF",border:"1px solid black",textAlign:"center"}:{backgroundColor:"",border:"1px solid black",textAlign:"center"}}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{style:this.getStyle(),onMouseEnter:function(){return e.setState({hoverd:!0})},onMouseLeave:function(){return e.setState({hoverd:!1})},onClick:this.props.onClick},this.props.children)}}]),a}(n.Component);var T=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(l.a)(this,a),(e=t.call(this)).pathname="/admin/watchDailyUsage",e.state={dStart:void 0,mStart:void 0,yStart:void 0,dEnd:void 0,mEnd:void 0,yEnd:void 0,lst_enteries:[]},e.changeSday=e.changeSday.bind(Object(h.a)(e)),e.changeEday=e.changeEday.bind(Object(h.a)(e)),e.changeSmonth=e.changeSmonth.bind(Object(h.a)(e)),e.changeEmonth=e.changeEmonth.bind(Object(h.a)(e)),e.changeSyear=e.changeSyear.bind(Object(h.a)(e)),e.changeEyear=e.changeEyear.bind(Object(h.a)(e)),e.submitDate=e.submitDate.bind(Object(h.a)(e)),e.saveCVS=e.saveCVS.bind(Object(h.a)(e)),e.getResults=e.getResults.bind(Object(h.a)(e)),e.getToday=e.getToday.bind(Object(h.a)(e)),e}return Object(i.a)(a,[{key:"ipos",value:function(){var e=new Date,t=e.getDate(),a=e.getMonth()+1,n=e.getFullYear();this.setState({dEnd:t,mEnd:a,yEnd:n,dStart:t,mStart:a,yStart:n})}},{key:"findMax",value:function(e){var t=e.guestNumber;return e.subscribeNumber>t&&(t=e.subscribeNumber),e.managerNumber>t&&(t=e.managerNumber),e.ownerNumber>t&&(t=e.ownerNumber),e.adminNumber>t&&(t=e.adminNumber),t}},{key:"evalPresentage",value:function(e,t){return e/t*100+"%"}},{key:"evalDataPresentages",value:function(e,t){return{guestNumber:this.evalPresentage(e.guestNumber,t),subscribeNumber:this.evalPresentage(e.subscribeNumber,t),managerNumber:this.evalPresentage(e.managerNumber,t),ownerNumber:this.evalPresentage(e.ownerNumber,t),adminNumber:this.evalPresentage(e.adminNumber,t)}}},{key:"renderBar",value:function(e,t,a,n){return r.a.createElement("div",{style:{float:"left",width:"100%",borderBottom:"black solid 1px",paddingBottom:"5px"}},r.a.createElement("div",{style:{float:"left",width:"15%"}},r.a.createElement("p",{style:{textAlign:"center",fontSize:"16px"}}," ",e," ")),r.a.createElement("div",{style:{float:"left",width:"83%",marginTop:"5px"}},r.a.createElement("div",{style:{width:a,backgroundColor:n,border:"black solid 1px"}},r.a.createElement("p",{style:{textAlign:"right",color:"black",paddingRight:"5px",fontSize:"14px",fontWeight:"bold"}}," ",t," "))))}},{key:"renderGraph",value:function(e){var t=this,a=this.findMax(e),n=this.evalDataPresentages(e,a),s=[];return s.push(this.renderBar("guests",e.guestNumber,n.guestNumber,"#AFF78F")),s.push(this.renderBar("subscribes",e.subscribeNumber,n.subscribeNumber,"#85F7CD")),s.push(this.renderBar("managers",e.managerNumber,n.managerNumber,"#88F4F7")),s.push(this.renderBar("owners",e.ownerNumber,n.ownerNumber,"#827EF7")),s.push(this.renderBar("admins",e.adminNumber,n.adminNumber,"#D27CF7")),r.a.createElement("div",{style:{float:"left",width:"100%"}},r.a.createElement("div",{style:{float:"left",width:"99%"}},r.a.createElement("h3",{style:{textAlign:"center"},onMouseOver:function(){return t.setState({})}}," ",e.date," ")),r.a.createElement("div",{style:{float:"left",width:"90%",marginLeft:"5%",border:"1px solid black"}},s))}},{key:"saveCVS",value:function(){var e=[],t=[["","date","guests","subscribes","managers","owners","admins"]];this.state.lst_enteries.forEach((function(e){t.push([e.date,e.guestNumber,e.subscribeNumber,e.managerNumber,e.ownerNumber,e.adminNumber])})),console.warn(t),t.forEach((function(t){e.push(t.join(",")),e.push("\n")})),console.warn(e);var a=document.createElement("a"),n=new Blob([e],{type:"text/csv"}),r=URL.createObjectURL(n);a.href=r,a.target="_blank",a.download="usageReport.csv",a.click()}},{key:"renderRangeGraph",value:function(){var e=this;if(void 0!==this.state.lst_enteries){var t=this.state.lst_enteries,a=[];return t.forEach((function(t){a.push(e.renderGraph(t))})),r.a.createElement("div",{style:{float:"left",width:"90%",marginLeft:"5%",border:"1px solid black",paddingBottom:"10px"}},r.a.createElement("div",{style:{float:"left",width:"10%",marginLeft:"89%"}},r.a.createElement(x,{text:"Save to CVS",onClick:this.saveCVS})),a)}}},{key:"changeSday",value:function(e){var t=e.target.value,a=parseInt(t);if(a>31||a<0){alert("Wrong value for Start day");var n=new Date;e.target.value=n.getDate()}this.setState({dStart:a})}},{key:"changeEday",value:function(e){var t=e.target.value,a=parseInt(t);if(a>31||a<1){alert("Wrong value for End day");var n=new Date;e.target.value=n.getDate()}this.setState({dEnd:a})}},{key:"changeSmonth",value:function(e){var t=e.target.value,a=parseInt(t);if(a>12||a<1){alert("Wrong value for Start month");var n=new Date;e.target.value=n.getMonth()+1}this.setState({mStart:a})}},{key:"changeEmonth",value:function(e){var t=e.target.value,a=parseInt(t);if(a>12||a<1){alert("Wrong value for End month");var n=new Date;e.target.value=n.getMonth()+1}this.setState({mEnd:a})}},{key:"changeSyear",value:function(e){var t=e.target.value,a=parseInt(t),n=new Date;(a>n.getFullYear()||a<0)&&(alert("Wrong value for Start year"),e.target.value=n.getFullYear()),this.setState({yStart:a})}},{key:"changeEyear",value:function(e){var t=e.target.value,a=parseInt(t),n=new Date;(a>n.getFullYear()||a<0)&&(alert("Wrong value for End year"),e.target.value=n.getFullYear()),this.setState({yEnd:a})}},{key:"getResults",value:function(e){if(e){var t=""+e.reason;if("Success"===t){var a=e.value.slice(0,e.value.length-1);e.value[e.value.length-1];this.setState({lst_enteries:a}),this.forceUpdate()}else"User_Not_Found"===t?alert("Error - the user is not in the system"):"NOT_ADMIN"===t?alert("The user is not an admin, rty again with other user"):"INVALID_DATE"===t?alert("The day youe enter is invalid, try again"):alert("visits could not recived data from the server")}else alert("Problem in vitis per day")}},{key:"getToday",value:function(e){if(e){var t=""+e.reason;if("Success"===t){var a=e.value[0];this.setState({today:a})}else"User_Not_Found"===t?alert("Error - the user is not in the system"):"NOT_ADMIN"===t?alert("The user is not an admin, rty again with other user"):"INVALID_DATE"===t?alert("The day youe enter is invalid, try again"):alert("visits could not recived data from the server")}else alert("Cant get today")}},{key:"submitDate",value:function(){if(void 0===this.state.dStart||void 0===this.state.mStart||void 0===this.state.yStart)alert("Didnt Select Start Date correctly");else if(void 0===this.state.dEnd||void 0===this.state.mEnd||void 0===this.state.yEnd)alert("Didnt Select End Date correctly");else if(this.state.yStart>this.state.yEnd)alert("Cant Select Start year greater then End year");else if(this.state.yStart==this.state.yEnd&&this.state.mStart>this.state.mEnd)alert("Cant Select Start month greater then End month");else if(this.state.yStart==this.state.yEnd&&this.state.mStart==this.state.mEnd&&this.state.dStart>this.state.dEnd)alert("Cant Select Start day greater then End day");else{var e=this.props.location.state.id,t={day:this.state.dStart,month:this.state.mStart,year:this.state.yStart},a={day:this.state.dEnd,month:this.state.mEnd,year:this.state.yEnd};C("/admin/visits?id="+e,"POST",{fromDate:t,toDate:a},this.getResults)}}},{key:"renderSelectDate",value:function(){return r.a.createElement("div",{style:{float:"left",width:"98%",marginLeft:"1%",marginTop:"10px",marginBottom:"10px",backgroundColor:"#E6F0FA"}},r.a.createElement("div",{style:{float:"left",width:"100%",textAlign:"center"}},r.a.createElement("h2",null," Select Range of Dates ")),r.a.createElement("div",{style:{float:"left",width:"10%"}},r.a.createElement("p",{style:{textAlign:"center",fontSize:"20px"}}," Start Date: ")),r.a.createElement("div",{style:{float:"left",width:"39%"}},r.a.createElement(N,{changeDay:this.changeSday,changeMon:this.changeSmonth,changeYear:this.changeSyear})),r.a.createElement("div",{style:{float:"left",width:"10%"}},r.a.createElement("p",{style:{textAlign:"center",fontSize:"20px"}}," End Date: ")),r.a.createElement("div",{style:{float:"left",width:"39%"}},r.a.createElement(N,{changeDay:this.changeEday,changeMon:this.changeEmonth,changeYear:this.changeEyear})),r.a.createElement("div",{style:{float:"left",width:"100%",textAlign:"center",marginTop:"2px"}},r.a.createElement(x,{text:"Show",onClick:this.submitDate})),this.renderRangeGraph())}},{key:"renderToday",value:function(){var e=this;if(K=function(t){e.setState({today:t})},void 0!==this.state.today)return this.renderGraph(this.state.today);var t=this.props.location.state.id,a=new Date,n={day:a.getDate(),month:a.getMonth()+1,year:a.getFullYear()};C("/admin/visits?id="+t,"POST",{fromDate:n,toDate:n},this.getToday)}},{key:"render",value:function(){var e=this;return r.a.createElement(m,null,r.a.createElement(oe,{state:this.props.location.state,refresh:function(){e.setState({})}}),r.a.createElement(D,{title:"Daily Usage"}),r.a.createElement("body",null,this.renderToday(),this.renderSelectDate()))}}]),a}(n.Component),N=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{style:{float:"left",width:"100%"}},r.a.createElement("div",{style:{float:"left",width:"32%",border:"1px solid black",textAlign:"center",backgroundColor:"#FBFFF7"}},r.a.createElement("p",{style:{marginTop:0,marginBottom:10,fontSize:21,width:"99.7%",backgroundColor:"#FFF9A8"}}," Day "),r.a.createElement("input",{style:{textAlign:"center",marginBottom:10,width:"50%"},type:"number",min:1,max:31,onChange:this.props.changeDay})),r.a.createElement("div",{style:{float:"left",width:"32%",border:"1px solid black",textAlign:"center",backgroundColor:"#FBFFF7"}},r.a.createElement("p",{style:{marginTop:0,marginBottom:10,fontSize:21,width:"99.7%",backgroundColor:"#FFF9A8"}}," Month "),r.a.createElement("input",{style:{textAlign:"center",marginBottom:10,width:"50%"},type:"number",min:1,max:12,onChange:this.props.changeMon})),r.a.createElement("div",{style:{float:"left",width:"32%",border:"1px solid black",textAlign:"center",backgroundColor:"#FBFFF7"}},r.a.createElement("p",{style:{marginTop:0,marginBottom:10,fontSize:21,width:"99.7%",backgroundColor:"#FFF9A8"}}," Year "),r.a.createElement("input",{style:{textAlign:"center",marginBottom:10,width:"50%"},type:"number",min:0,max:2020,onChange:this.props.changeYear})))}}]),a}(n.Component),F=!1,M=[],B=[],R=[],L=[],I=[],q=[],W=[],U=[],G=[],V=[],Y=0,H=0,X=0,z=0,J=0,Z=void 0,$=void 0,K=void 0;var Q=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={color_0:"#92BAFF",color_1:"#92BAFF",color_2:"#92BAFF",color_3:"#92BAFF",color_4:"#92BAFF",refresh:void 0},n.handleNotification=n.handleNotification.bind(Object(h.a)(n)),n.parseNotification=n.parseNotification.bind(Object(h.a)(n)),n.parseList=n.parseList.bind(Object(h.a)(n)),n.renderPopUp=n.renderPopUp.bind(Object(h.a)(n)),n.buttonX=n.buttonX.bind(Object(h.a)(n)),n}return Object(i.a)(a,[{key:"parseNotification",value:function(e){console.log(e);var t=e.reason;if("Buy_Product"===t)B.includes(e.id)||(e.value.forEach((function(e){M.push(e)})),B.push(e.id));else if("Reply_Request"===t)L.includes(e.id)||(R.push(e.value),L.push(e.id));else if("Removed_From_Management"===t)q.includes(e.id)||(I.push(e.value),q.push(e.id));else if("Approve_Owner"===t){console.log(e.value);var a=e.value,n={store:a[0],name:a[1]};U.includes(e.id)||(W.push(n),U.push(e.id))}else if("Add_Owner"===t){console.log(e.value);var r={store:e.value};G.push(r),V.push(e.id)}else"Day_Visit"===t?($=e.value,void 0!=K&&K($),!1):alert("recived op code notifiaction")}},{key:"parseList",value:function(e){var t=this;e.forEach((function(e){return t.parseNotification(e)}))}},{key:"handleNotification",value:function(e){this.parseList(e),Y=M.length,H=R.length,X=I.length,z=W.length,J=G.length,this.setState({}),this.forceUpdate()}},{key:"connectHandler",value:function(e){!1===F&&(M=[],B=[],R=[],L=[],I=[],q=[],Y=0,H=0,X=0,_(""+e,this.handleNotification),F=!0)}},{key:"buttonX",value:function(){if("PRODUCTS"===Z){var e=B;M=[],B=[],Y=0,C("/ack?id="+this.props.id,"POST",e,(function(){}))}else if("REPLAYS"===Z){var t=L;R=[],L=[],H=0,C("/ack?id="+this.props.id,"POST",t,(function(){}))}else if("MANAGMENT"===Z){var a=q;I=[],q=[],X=0,C("/ack?id="+this.props.id,"POST",a,(function(){}))}else if("WAITING_APPROVES"===Z){var n=U;W=[],U=[],z=0,C("/ack?id="+this.props.id,"POST",n,(function(){}))}else if("APPROVED"===Z){var r=V;G=[],V=[],J=0,C("/ack?id="+this.props.id,"POST",r,(function(){}))}Z=void 0,this.setState({})}},{key:"renderProudcts",value:function(){var e=[];return 0===M.length?r.a.createElement("p",{style:{textAlign:"center"}}," No Product Notifications Yet "):(M.forEach((function(t){e.push(r.a.createElement("div",{style:{border:"2px solid black",padding:2,backgroundColor:"white"}},r.a.createElement("p",{style:{textAlign:"center",padding:4}}," Proudct Name: ",t.productName," "),r.a.createElement("p",{style:{textAlign:"center",padding:4}}," Store Name: ",t.store," "),r.a.createElement("p",{style:{textAlign:"center",padding:4}}," Amount Bought: ",t.amount," ")))})),e)}},{key:"renderReplays",value:function(){var e=[];return 0===R.length?r.a.createElement("p",{style:{textAlign:"center"}}," No Replays Notification Yet "):(R.forEach((function(t){e.push(r.a.createElement("div",{style:{border:"2px solid black",padding:2,backgroundColor:"white"}},r.a.createElement("p",{style:{textAlign:"center",padding:4}}," Store Name: ",t.store," "),r.a.createElement("p",{style:{textAlign:"center",padding:4}}," Content: ",t.content," "),r.a.createElement("p",{style:{textAlign:"center",padding:4}}," Comment: ",t.comment," "),r.a.createElement("p",{style:{textAlign:"center",padding:4}}," Id: ",t.id," ")))})),e)}},{key:"renderManagment",value:function(){var e=[];return 0===I.length?r.a.createElement("p",{style:{textAlign:"center"}}," No Removes From Management Yet "):(I.forEach((function(t){e.push(r.a.createElement("div",{style:{border:"2px solid black",padding:2,backgroundColor:"white"}},r.a.createElement("p",{style:{textAlign:"center",padding:4}}," Store Name: ",t," ")))})),e)}},{key:"renderWaitingApprovals",value:function(){var e=[];return 0===W.length?r.a.createElement("p",{style:{textAlign:"center"}}," No New Waiting Approvels For Owners Yet "):(W.forEach((function(t){console.log(t),e.push(r.a.createElement("div",{style:{border:"2px solid black",padding:2,backgroundColor:"white"}},r.a.createElement("p",{style:{textAlign:"center",padding:4}}," Store Name: ",t.store," "),r.a.createElement("p",{style:{textAlign:"center",padding:4}}," Owner Name: ",t.name," ")))})),e)}},{key:"renderApprovals",value:function(){var e=[];return 0===G.length?r.a.createElement("p",{style:{textAlign:"center"}}," No New Approvels For Being Owners "):(G.forEach((function(t){console.log(t),e.push(r.a.createElement("div",{style:{border:"2px solid black",padding:2,backgroundColor:"white"}},r.a.createElement("p",{style:{textAlign:"center",padding:4}}," Store Name: ",t.store," ")))})),e)}},{key:"renderPopUp",value:function(){if(void 0!==Z)return"PRODUCTS"===Z?r.a.createElement("div",{style:ee},r.a.createElement("div",{style:te},r.a.createElement("h2",{style:{textAlign:"center",backgroundColor:"#150A80",width:"100%",marginTop:0,color:"white"}},"Products"),r.a.createElement("div",null,this.renderProudcts(),r.a.createElement(x,{text:"X",onClick:this.buttonX})))):"REPLAYS"===Z?r.a.createElement("div",{style:ee},r.a.createElement("div",{style:te},r.a.createElement("h2",{style:{textAlign:"center",backgroundColor:"#150A80",width:"100%",marginTop:0,color:"white"}},"Replays"),r.a.createElement("div",null,this.renderReplays(),r.a.createElement(x,{text:"X",onClick:this.buttonX})))):"MANAGMENT"===Z?r.a.createElement("div",{style:ee},r.a.createElement("div",{style:te},r.a.createElement("h2",{style:{textAlign:"center",backgroundColor:"#150A80",width:"100%",marginTop:0,color:"white"}},"Remove From Manager"),r.a.createElement("div",null,this.renderManagment(),r.a.createElement(x,{text:"X",onClick:this.buttonX})))):"WAITING_APPROVES"===Z?r.a.createElement("div",{style:ee},r.a.createElement("div",{style:te},r.a.createElement("h2",{style:{textAlign:"center",backgroundColor:"#150A80",width:"100%",marginTop:0,color:"white"}},"New Waiting Approvals"),r.a.createElement("div",null,this.renderWaitingApprovals(),r.a.createElement(x,{text:"X",onClick:this.buttonX})))):"APPROVED"==Z?r.a.createElement("div",{style:ee},r.a.createElement("div",{style:te},r.a.createElement("h2",{style:{textAlign:"center",backgroundColor:"#150A80",width:"100%",marginTop:0,color:"white"}},"New Approvals "),r.a.createElement("div",null,this.renderApprovals(),r.a.createElement(x,{text:"X",onClick:this.buttonX})))):void 0}},{key:"render",value:function(){var e=this;return this.connectHandler(this.props.id),r.a.createElement("div",{style:{width:"100%",backgroundColor:"#92BAFF",margin:0}},r.a.createElement("div",{style:{float:"left",width:"19.9%",backgroundColor:this.state.color_0,maring:0,borderRight:"1px solid white"},onMouseOver:function(){return e.setState({color_0:"#BEDEFF"})},onMouseLeave:function(){return e.setState({color_0:"#92BAFF"})},onClick:function(){Z="PRODUCTS",e.setState({})}},r.a.createElement("h4",{style:{textAlign:"center",margin:0}}," Upcoming Phurchases",r.a.createElement("em",{style:{color:"black",fontSize:23}}," ",Y," "))),r.a.createElement("div",{style:{float:"left",width:"19.9%",backgroundColor:this.state.color_1,maring:0,borderRight:"1px solid white"},onMouseOver:function(){return e.setState({color_1:"#BEDEFF"})},onMouseLeave:function(){return e.setState({color_1:"#92BAFF"})},onClick:function(){Z="REPLAYS",e.setState({})}},r.a.createElement("h4",{style:{textAlign:"center",margin:0}}," Replays",r.a.createElement("em",{style:{color:"black",fontSize:23}}," ",H," "))),r.a.createElement("div",{style:{float:"left",width:"19.9%",backgroundColor:this.state.color_2,maring:0,borderRight:"1px solid white"},onMouseOver:function(){return e.setState({color_2:"#BEDEFF"})},onMouseLeave:function(){return e.setState({color_2:"#92BAFF"})},onClick:function(){Z="MANAGMENT",e.setState({})}},r.a.createElement("h4",{style:{textAlign:"center",margin:0}}," Dismissal From Managment",r.a.createElement("em",{style:{color:"black",fontSize:23}}," ",X," "))),r.a.createElement("div",{style:{float:"left",width:"20%",backgroundColor:this.state.color_3,maring:0,borderRight:"1px solid white"},onMouseOver:function(){return e.setState({color_3:"#BEDEFF"})},onMouseLeave:function(){return e.setState({color_3:"#92BAFF"})},onClick:function(){Z="WAITING_APPROVES",e.setState({})}},r.a.createElement("h4",{style:{textAlign:"center",margin:0}}," Waiting Agreements",r.a.createElement("em",{style:{color:"black",fontSize:23}}," ",z," "))),r.a.createElement("div",{style:{float:"left",width:"20%",backgroundColor:this.state.color_4,maring:0},onMouseOver:function(){return e.setState({color_4:"#BEDEFF"})},onMouseLeave:function(){return e.setState({color_4:"#92BAFF"})},onClick:function(){Z="APPROVED",e.setState({})}},r.a.createElement("h4",{style:{textAlign:"center",margin:0}}," Approvels Agreements",r.a.createElement("em",{style:{color:"black",fontSize:23}}," ",J," "))),this.renderPopUp())}}]),a}(n.Component),ee={position:"fixed",width:"100%",height:"100%",top:"0",left:"0",right:"0",bottom:"0",margin:"auto",backgroundColor:"#7A919E",opacity:"0.95"},te={position:"absolute",left:"15%",right:"15%",top:"15%",bottom:"15%",margin:"auto",backgroundColor:"#9DBBCC",overflowY:"scroll"},ae=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).fromPath=n.props.fromPath,n.prevState=n.props.state,n.refresh=n.refresh.bind(Object(h.a)(n)),n.checkIfAdmin=n.checkIfAdmin.bind(Object(h.a)(n)),n.getAdminWatchPurchaseHistoryHtml=n.getAdminWatchPurchaseHistoryHtml.bind(Object(h.a)(n)),n.checkIfManager=n.checkIfManager.bind(Object(h.a)(n)),n.getManageStoresHtml=n.getManageStoresHtml.bind(Object(h.a)(n)),n.admin=!1,n.manager=!1,n.state={},n.checkIfAdmin(),n.checkIfManager(),n}return Object(i.a)(a,[{key:"checkIfAdmin",value:function(){var e=this,t=this.props.state.id;C("/admin/allusers?id="+t,"GET","",(function(t){(console.log(t),t)&&("Success"===""+t.reason?e.setState({admin:!0}):e.setState({admin:!1}))}))}},{key:"getAdminWatchPurchaseHistoryHtml",value:function(){var e=this,t=function(e){e.currentTarget.style.backgroundColor="#B3D1F0"},a=function(e){e.currentTarget.style.backgroundColor=""};return[r.a.createElement("th",{style:{margin:0,borderRight:"1px solid white"},onClick:function(){return v(y,"/admin/storehistory",e.fromPath,e.props.state)},onMouseOver:t,onMouseLeave:a}," Purchases "),r.a.createElement("th",{style:{margin:0,borderRight:"1px solid white"},onClick:function(){return v(y,"/admin/watchRevenu",e.fromPath,e.props.state)},onMouseOver:t,onMouseLeave:a}," Revenues "),r.a.createElement("th",{style:{margin:0,borderRight:"1px solid white"},onClick:function(){return v(y,"/admin/watchDailyUsage",e.fromPath,e.props.state)},onMouseOver:t,onMouseLeave:a}," Daily Usage ")]}},{key:"checkIfManager",value:function(){var e=this,t=this.props.state.id;C("/managers/mystores?id="+t,"GET","",(function(t){(console.log(t),t)&&("Success"===""+t.reason?e.setState({manager:!0}):e.setState({manager:!1}))}))}},{key:"getManageStoresHtml",value:function(){var e=this;return r.a.createElement("th",{style:{margin:0,borderRight:"1px solid white"},onClick:function(){return v(y,"/storeManagement",e.fromPath,e.props.state)},onMouseOver:function(e){e.currentTarget.style.backgroundColor="#B3D1F0"},onMouseLeave:function(e){e.currentTarget.style.backgroundColor=""}}," Manage Stores ")}},{key:"logout",value:function(){var e=this.props.state.id;F=!1,C("/home/logout?id="+e,"POST","",(function(){})),null!==O&&O.disconnect(),v(y,"/",this.fromPath,{id:e})}},{key:"refresh",value:function(){this.setState({})}},{key:"render",value:function(){var e=this,t=function(e){e.currentTarget.style.backgroundColor="#B3D1F0"},a=function(e){e.currentTarget.style.backgroundColor=""};return r.a.createElement("header",{style:{backgroundColor:"#FFC242",borderBottom:"2px solid #B38118",marginBottom:0}},r.a.createElement("table",{style:re},r.a.createElement("tr",{style:{width:"100%"}},r.a.createElement("th",{style:{margin:0,borderRight:"1px solid white",backgroundColor:"#FFEB57"},onClick:function(){return v(y,"/subscribe",e.fromPath,e.props.state)},onMouseOver:t,onMouseLeave:function(e){e.currentTarget.style.backgroundColor="#FFEB57"}}," Menu "),r.a.createElement("th",{style:{margin:0,borderRight:"1px solid white"},onClick:function(){return v(y,"/viewStoresAndProducts",e.fromPath,e.props.state)},onMouseOver:t,onMouseLeave:a}," View Stores & Products "),r.a.createElement("th",{style:{margin:0,borderRight:"1px solid white"},onClick:function(){return v(y,"/searchAndFilter",e.fromPath,e.props.state)},onMouseOver:t,onMouseLeave:a}," Search Products "),r.a.createElement("th",{style:{margin:0,borderRight:"1px solid white"},onClick:function(){return v(y,"/sendRequest",e.fromPath,e.props.state)},onMouseOver:t,onMouseLeave:a}," Send Request "),r.a.createElement("th",{style:{margin:0,borderRight:"1px solid white"},onClick:function(){return v(y,"/openStore",e.fromPath,e.props.state)},onMouseOver:t,onMouseLeave:a}," Open Store "),this.state.manager?this.getManageStoresHtml():"",this.state.admin?this.getAdminWatchPurchaseHistoryHtml():"",r.a.createElement("th",{style:{margin:0,borderRight:"1px solid white"},onClick:function(){return v(y,"/userWatchPurchasesHistory",e.fromPath,e.props.state)},onMouseOver:t,onMouseLeave:a}," My Purchases "),r.a.createElement("th",{style:{margin:0,borderRight:"1px solid white"},onClick:function(){return v(y,"/viewMyCart",e.fromPath,e.props.state)},onMouseOver:t,onMouseLeave:a}," My Cart "),r.a.createElement("th",{onClick:function(){return e.logout()},onMouseOver:t,onMouseLeave:a}," Logout "))),r.a.createElement(Q,{id:this.props.state.id}))}}]),a}(n.Component),ne=ae,re={color:"black",backgroundColor:"#FFC242",fontFamily:"Arial",fontSize:"14px",width:"100%",height:"50px",padding:0},se=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).fromPath=n.props.fromPath,n.state={},n}return Object(i.a)(a,[{key:"renderGuest",value:function(){var e=this,t=function(e){e.currentTarget.style.backgroundColor="#B3D1F0"},a=function(e){e.currentTarget.style.backgroundColor=""};return r.a.createElement("header",{style:{backgroundColor:"#FFC242",borderBottom:"2px solid #B38118"}},r.a.createElement("title",null," Trading System "),r.a.createElement("table",{style:le},r.a.createElement("tr",{style:{width:"100%"}},r.a.createElement("th",{style:{margin:0,borderRight:"1px solid white"},onClick:function(){return v(y,"/",e.fromPath,e.props.state)},onMouseOver:t,onMouseLeave:a}," Menu "),r.a.createElement("th",{style:{margin:0,borderRight:"1px solid white"},onClick:function(){return v(y,"/viewStoresAndProducts",e.fromPath,e.props.state)},onMouseOver:t,onMouseLeave:a}," Watch Store and Products "),r.a.createElement("th",{style:{margin:0,borderRight:"1px solid white"},onClick:function(){return v(y,"/searchAndFilter",e.fromPath,e.props.state)},onMouseOver:t,onMouseLeave:a}," Search and Filter Products "),r.a.createElement("th",{style:{margin:0,borderRight:"1px solid white"},onClick:function(){return v(y,"/register",e.fromPath,e.props.state)},onMouseOver:t,onMouseLeave:a}," Register "),r.a.createElement("th",{style:{margin:0,borderRight:"1px solid white"},onClick:function(){return v(y,"/login",e.fromPath,e.props.state)},onMouseOver:t,onMouseLeave:a}," Login "),r.a.createElement("th",{style:{margin:0,borderRight:"1px solid white"},onClick:function(){return v(y,"/viewMyCart",e.fromPath,e.props.state)},onMouseOver:t,onMouseLeave:a}," Watch My Cart "))))}},{key:"render",value:function(){return void 0===this.props.state||void 0===this.props.state.logged?this.renderGuest():r.a.createElement(ne,{state:this.props.state})}}]),a}(n.Component),oe=se,le={color:"black",backgroundColor:"#FFC242",fontFamily:"Arial",width:"100%",height:"50px",padding:0,margin:0},ie=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(l.a)(this,a),(e=t.call(this)).state={hoverd:!1},e}return Object(i.a)(a,[{key:"getStyle",value:function(){return this.state.hoverd?{backgroundColor:"#92BAFF"}:{backgroundColor:""}}},{key:"render",value:function(){var e=this;return r.a.createElement("tr",{style:this.getStyle(),onMouseEnter:function(){return e.setState({hoverd:!0})},onMouseLeave:function(){return e.setState({hoverd:!1})},onClick:this.props.onClick},this.props.children)}}]),a}(n.Component),ce=ie,ue=a(71),de=a.n(ue),he=a(24),me=a.n(he),pe=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).pathname="/",n.state={id:-1,error:"",stores:[],flag:!1},n.handleConnect=n.handleConnect.bind(Object(h.a)(n)),n.handleGetId=n.handleGetId.bind(Object(h.a)(n)),n.buildStores=n.buildStores.bind(Object(h.a)(n)),n.create_stores=n.create_stores.bind(Object(h.a)(n)),n}return Object(i.a)(a,[{key:"buildStores",value:function(e){if(null==e)alert("Server Failed");else{var t=""+e.reason;"Success"===t?this.setState({stores:e.value,flag:!0}):alert("Cant Buy cart see code problem: "+t)}}},{key:"create_stores",value:function(){!1===this.state.flag&&C("/store","GET","",this.buildStores)}},{key:"renderStore",value:function(e){return r.a.createElement("div",{style:{float:"left",width:"30%",border:"1px solid black",textAlign:"center",margin:"1%"}},r.a.createElement("div",{style:{float:"left",width:"100%",background:"#3086DB"}},r.a.createElement("p",null," ",e.name," ")),r.a.createElement("div",{style:{float:"left",width:"100%"}},r.a.createElement("p",null," ",e.description," ")),r.a.createElement("div",{style:{float:"left",width:"100%"}},r.a.createElement("img",{src:me.a})))}},{key:"render_stores_table",value:function(){var e=this;this.create_stores();var t=[];return this.state.stores.forEach((function(a){t.push(e.renderStore(a))})),t}},{key:"handleConnect",value:function(){C("/home/connect","GET","",this.handleGetId)}},{key:"handleGetId",value:function(e){if(null===e)this.props.location.state={id:-1};else{var t=""+e.reason;this.props.location.state="Success"!==t?{id:-1}:{id:e.value}}this.setState({})}},{key:"render",value:function(){return void 0===this.props.location.state&&this.handleConnect(),void 0===this.props.location.state||-1==this.props.location.state.id?r.a.createElement("img",{src:de.a}):r.a.createElement(m,null,r.a.createElement(oe,{state:this.props.location.state}),r.a.createElement("body",null,r.a.createElement(D,{title:"Welcome Guest"}),r.a.createElement("div",{style:{float:"left",width:"100%"}},r.a.createElement("h3",{style:{textAlign:"center"}}," Stores "),this.render_stores_table())))}}]),a}(n.Component),ye=pe,ve=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){var e="";return null!=this.props.error&&(e="2px solid red"),r.a.createElement("div",{style:{marginLeft:"30%",marginRight:"30%",padding:5,border:e}},r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement("label",{style:{marginLeft:5,marginRight:12}}," ",this.props.title," ")),r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement("input",{style:{textAlign:"center"},type:this.props.type,min:this.props.min,max:this.props.max,value:this.props.value,onChange:this.props.onChange})),r.a.createElement("div",{style:{textAlign:"center"}},null!=this.props.error?r.a.createElement("lable",{style:fe}," ",this.props.error," "):""))}}]),a}(n.Component),ge=ve,fe={textAlign:"center",color:"red",fontFamily:"Arial",width:"99%"},Ee=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(l.a)(this,a),(e=t.call(this)).handleChangeName=e.handleChangeName.bind(Object(h.a)(e)),e.handleChangePassword=e.handleChangePassword.bind(Object(h.a)(e)),e.handleSubmit=e.handleSubmit.bind(Object(h.a)(e)),e.state={name:"",password:""},e}return Object(i.a)(a,[{key:"handleChangeName",value:function(e){this.setState({name:e.target.value})}},{key:"handleChangePassword",value:function(e){this.setState({password:e.target.value})}},{key:"handleSubmit",value:function(){var e=this;this.setState({valid_error:""});var t=this.props.location.state.id,a={name:this.state.name,password:this.state.password};C("/home/register?id="+t,"POST",a,(function(t){if(null===t)e.setState({valid_error:"server crashed"});else{var a=""+t.reason;if("Invalid_Register_Details\u200f".startsWith(a,0))e.setState({valid_error:"name or password isnt valid"});else if("User_Name_Already_Exist\u200f".startsWith(a,0))e.setState({valid_error:"user already exits"});else if("Hash_Fail".startsWith(a,0))e.setState({valid_error:"system error, invalid data"});else if("Success"===a){var n=e.props.location.state;n.name=e.state.name,v(e.props.history,"/login",e.pathname,n)}}})),this.setState({click:"true"})}},{key:"render",value:function(){return r.a.createElement(m,null,r.a.createElement(oe,{state:this.props.location.state}),r.a.createElement(D,{title:"Want to Register?"}),r.a.createElement("div",null,r.a.createElement(ge,{title:"User Name:",error:void 0!==this.state.valid_error?"":this.state.valid_error,type:"text",value:this.state.name,onChange:this.handleChangeName}),r.a.createElement(ge,{title:"Password:",error:this.state.valid_error,type:"password",value:this.state.password,onChange:this.handleChangePassword}),r.a.createElement(x,{text:"Submit",onClick:this.handleSubmit})))}}]),a}(n.Component),be=Ee,Ce=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(l.a)(this,a),(e=t.call(this)).handleChangeName=e.handleChangeName.bind(Object(h.a)(e)),e.handleChangePassword=e.handleChangePassword.bind(Object(h.a)(e)),e.handleSubmit=e.handleSubmit.bind(Object(h.a)(e)),e.state={name:"",password:""},e}return Object(i.a)(a,[{key:"handleChangeName",value:function(e){this.setState({name:e.target.value})}},{key:"handleChangePassword",value:function(e){this.setState({password:e.target.value})}},{key:"handleSubmit",value:function(){var e=this,t=this.props.location.state.id,a={name:this.state.name,password:this.state.password};C("/home/login?id="+t,"POST",a,(function(t){if(null===t)alert("Server Crashed");else{var a=""+t.reason;if("Success"===a){var n=e.props.location.state;n.name=e.state.name,n.logged=!0,v(e.props.history,"/subscribe",e.pathname,n)}else"Invalid_Login_Details\u200f".startsWith(a,0)?e.setState({valid_error:"Invalid Name or Password"}):"User_Not_Found\u200f".startsWith(a,0)&&e.setState({valid_error:"User Not Found"})}}))}},{key:"render",value:function(){var e=this;return r.a.createElement(m,null,r.a.createElement(oe,{state:this.props.location.state}),r.a.createElement(D,{title:"Want to Login?"}),r.a.createElement("div",null,r.a.createElement(ge,{title:"User Name:",error:void 0!==this.state.valid_error?"":this.state.valid_error,type:"text",value:this.state.name,onChange:this.handleChangeName}),r.a.createElement(ge,{title:"Password:",error:this.state.valid_error,type:"password",value:this.state.password,onChange:this.handleChangePassword}),r.a.createElement(x,{text:"Submit",onClick:this.handleSubmit}),r.a.createElement(x,{text:"cancel",onClick:function(){return v(e.props.history,"/",e.pathname,e.props.location.state)}})))}}]),a}(n.Component),Se=Ce,ke=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this)).pathname="/viewAndReplyRequests",n.buildPurchases=n.buildPurchases.bind(Object(h.a)(n)),n.create_Purchases=n.create_Purchases.bind(Object(h.a)(n)),n.renderPurchase=n.renderPurchase.bind(Object(h.a)(n)),n.state={purchases:[]},n.flag=!0,n.counter=1,n}return Object(i.a)(a,[{key:"create_Purchases",value:function(){this.flag&&(this.flag=!1,C("/managers/history/"+this.props.location.state.storeName+"?id="+this.props.location.state.id,"GET","",this.buildPurchases))}},{key:"buildPurchases",value:function(e){if(null==e)alert("Server Failed");else{var t=""+e.reason;"Success"==t?this.setState({purchases:e.value}):"Store_Not_Found"==t?alert("the store does'nt exist"):"Dont_Have_Permission"==t?alert("you don't have permission to watch the store history"):alert(t+", Can't present your store purchases")}}},{key:"renderPurchase",value:function(){var e=this,t=[];return this.state.purchases.forEach((function(a){var n=a.date.indexOf("T");t.push(r.a.createElement("table",{style:Pe},r.a.createElement("tr",null,"purchase "+e.counter+++":",r.a.createElement("th",null,"buyer:"+a.buyer),r.a.createElement("th",null,"store:"+a.storeName),r.a.createElement("th",null,"total price:"+a.price),r.a.createElement("th",null,"date:"+a.date.substring(0,n)),r.a.createElement("th",null,"hour:"+a.date.substring(n+1))),e.renderProduct(a.product)))})),this.counter=1,t}},{key:"renderProduct",value:function(e){var t=[];return e.forEach((function(e){t.push(r.a.createElement("tr",null,r.a.createElement("th",null,"product name:"+e.productName),r.a.createElement("th",null,"category:"+e.category),r.a.createElement("th",null,"amount:"+e.amount),r.a.createElement("th",null,"purchase type:"+e.purchaseType)))})),t}},{key:"render",value:function(){var e=this;return this.create_Purchases(),r.a.createElement(m,null,r.a.createElement(oe,{state:this.props.location.state}),r.a.createElement(D,{title:0===this.state.purchases.length?"you didn't have sales yet":"store purchases:"}),this.renderPurchase(),r.a.createElement(x,{text:"Back",onClick:function(){v(e.props.history,e.props.location.fromPath,e.pathname,e.props.location.state)}}))}}]),a}(n.Component),Pe={color:"black",padding:"1px",margin:"10px",lineHeight:5,fontFamily:"Arial",width:"80%"},Ae=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this)).buildPurchases=n.buildPurchases.bind(Object(h.a)(n)),n.create_Purchases=n.create_Purchases.bind(Object(h.a)(n)),n.counter=1,n.state={purchases:[]},n.flag=!0,n}return Object(i.a)(a,[{key:"handleChangeReview",value:function(e,t){t.review=e.target.value,this.setState({})}},{key:"handleSubmit",value:function(e,t){var a=this.props.location.state.name,n={store:t.store,productName:t.productName,content:t.review,writer:a};C("/home/product/review?id="+this.props.location.state.id,"POST",n,this.sendReview)}},{key:"sendReview",value:function(e){if(null==e)alert("Server Failed");else{var t=""+e.reason;"Success"===t?alert("review was added successfully"):"Invalid_Review"===t?alert("Can't send empty review"):"Store_Not_Found"===t?alert("Store not found"):"Cant_Add_Review"===t?alert("the product was removed from the store"):alert(t+", Can't add your review")}}},{key:"create_Purchases",value:function(){this.flag&&(this.flag=!1,C("/home/history?id="+this.props.location.state.id,"GET","",this.buildPurchases))}},{key:"buildPurchases",value:function(e){if(null==e)alert("Server Failed");else{var t=""+e.reason;"Success"==t?this.setState({purchases:e.value}):alert(t+", Can't present your purchases")}}},{key:"renderPurchase",value:function(){var e=this,t=[];return this.state.purchases.forEach((function(a){var n=a.date.indexOf("T");t.push(r.a.createElement("div",{style:{float:"left",width:"100%",border:"1px solid black"},onMouseOver:function(e){e.currentTarget.style.backgroundColor="#92BAFF"},onMouseLeave:function(e){e.currentTarget.style.backgroundColor=""}},r.a.createElement("div",{style:{float:"left",width:"100%",backgroundColor:"#9BEBE5"}},r.a.createElement("div",{style:{float:"left",width:"20%",textAlign:"center"}},r.a.createElement("p",null," Buyer: ",a.buyer," ")),r.a.createElement("div",{style:{float:"left",width:"20%",textAlign:"center"}},r.a.createElement("p",null," Store: ",a.storeName," ")),r.a.createElement("div",{style:{float:"left",width:"20%"}},r.a.createElement("p",null," Total Price: ",a.price," ")),r.a.createElement("div",{style:{float:"left",width:"20%"}},r.a.createElement("p",null," Date: ",a.date.substring(0,n)," ")),r.a.createElement("div",{style:{float:"left",width:"20%"}},r.a.createElement("p",null," Hour: ",a.date.substring(n+1)," "))),r.a.createElement("div",{style:{float:"left",width:"100%"}},e.renderProduct(a.product))))})),this.counter=1,t}},{key:"renderProduct",value:function(e){var t=this,a=[];return e.forEach((function(e){a.push(r.a.createElement("div",{style:{float:"left",width:"90%",marginLeft:"5%"}},r.a.createElement("div",{style:{float:"left",width:"25%"}},r.a.createElement("p",null," Product Name: ",e.productName," ")),r.a.createElement("div",{style:{float:"left",width:"25%"}},r.a.createElement("p",null," Category: ",e.category," ")),r.a.createElement("div",{style:{float:"left",width:"25%"}},r.a.createElement("p",null," Amount: ",e.amount," ")),r.a.createElement("div",{style:{float:"left",width:"25%"}},r.a.createElement("p",null," Purchase Type: ",e.purchaseType," ")),r.a.createElement("div",{style:{float:"left",width:"50%"}},r.a.createElement(ge,{title:"Review:",type:"text",value:e.review,onChange:function(a){return t.handleChangeReview(a,e)}})),r.a.createElement("div",{style:{float:"left",width:"50%"}},r.a.createElement(x,{text:"add review",onClick:function(a){return t.handleSubmit(a,e)}}))))})),a}},{key:"render",value:function(){return this.create_Purchases(),r.a.createElement(m,null,r.a.createElement(oe,{state:this.props.location.state}),r.a.createElement(D,{title:0===this.state.purchases.length?"you did'nt make any purchases":"my purchases:"}),r.a.createElement("div",null,this.renderPurchase()))}}]),a}(n.Component),Oe=function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).handleStores=a.handleStores.bind(Object(h.a)(a)),a.buildStores=a.buildStores.bind(Object(h.a)(a)),a.buildProducts=a.buildProducts.bind(Object(h.a)(a)),a.create_products=a.create_products.bind(Object(h.a)(a)),a.create_stores=a.create_stores.bind(Object(h.a)(a)),a.render_stores_table=a.render_stores_table.bind(Object(h.a)(a)),a.render_stores=a.render_stores.bind(Object(h.a)(a)),a.render_product_table=a.render_product_table.bind(Object(h.a)(a)),a.render_product=a.render_product.bind(Object(h.a)(a)),a.renderDiscountAndPolicyButtons=a.renderDiscountAndPolicyButtons.bind(Object(h.a)(a)),a.pathname="/viewStoresAndProducts",a.state={stores:[],stores_updated:!1,products:[],store:"",showProducts:!1},a}return Object(i.a)(n,[{key:"buildStores",value:function(e){if(null==e)alert("Server Failed");else{var t=""+e.reason;"Success"===t?this.setState({stores:e.value}):alert(t+", Cant Add Product to Store")}}},{key:"create_stores",value:function(){!1===this.state.stores_updated&&C("/store","GET","",this.buildStores)}},{key:"buildProducts",value:function(e){if(null==e)alert("Server Failed");else{var t=""+e.reason;"Success"===t?this.setState({products:e.value}):"Store_Not_Found\u200f"===t?(alert("Store Not Found. Sorry."),this.setState({stores_updated:!0}),this.create_stores()):alert(t+", Cant Add Product to Store")}}},{key:"create_products",value:function(e){C("/home/product?store="+e,"GET","",this.buildProducts)}},{key:"handleStores",value:function(e,t){this.setState({showProducts:!0,store:t}),this.create_products(t)}},{key:"renderStore",value:function(e){var t=this;if(this.create_stores(),0===this.state.stores.length)return r.a.createElement("p",{style:{textAlign:"center"}}," No products in store ");return r.a.createElement("div",{style:{float:"left",width:"30%",border:"1px solid black",textAlign:"center",margin:"1%"},onMouseOver:function(e){e.currentTarget.style.backgroundColor="#92BAFF"},onMouseLeave:function(e){e.currentTarget.style.backgroundColor=""},onClick:function(a){return t.handleStores(a,e.name)}},r.a.createElement("div",{style:{float:"left",width:"100%",background:"#3086DB"}},r.a.createElement("p",null," ",e.name," ")),r.a.createElement("div",{style:{float:"left",width:"100%"}},r.a.createElement("p",null," ",e.description," ")),r.a.createElement("div",{style:{float:"left",width:"100%"}},r.a.createElement("img",{src:a(24)})))}},{key:"render_stores_table",value:function(){var e=this,t=this.state.stores,a=[];return t.forEach((function(t){return a.push(e.renderStore(t))})),a}},{key:"render_stores",value:function(){return this.create_stores(),0===this.state.stores.length?r.a.createElement("p",{style:{textAlign:"center"}}," No products in store "):this.render_stores_table()}},{key:"render_product_table",value:function(){var e=this,t=this.props.location.state,a=this.state.products,n=[];return a.forEach((function(a){return n.push(r.a.createElement(ce,{onClick:function(){return function(a){t.product={productName:a.productName,storeName:a.storeName,category:a.category,amount:a.amount,price:a.price,purchaseType:a.purchaseType},v(e.props.history,"/addToCart",e.pathname,t)}(a)}},r.a.createElement("th",null," ",a.productName," "),r.a.createElement("th",null," ",a.category," "),r.a.createElement("th",null," ",a.amount," "),r.a.createElement("th",null," ",a.price," "),r.a.createElement("th",null," ",a.purchaseType," ")))})),n}},{key:"renderDiscountAndPolicyButtons",value:function(){var e=this,t=this.props.location.state;t.storeName=this.state.store;return r.a.createElement("table",{style:_e},r.a.createElement("tr",null,r.a.createElement("th",null,r.a.createElement(x,{text:"View Store Discounts",onClick:function(){return v(e.props.history,"/viewDiscounts",e.pathname,t)}})),r.a.createElement("th",null,r.a.createElement(x,{text:"View Store Policies",onClick:function(){return v(e.props.history,"/viewPolicies",e.pathname,t)}}))))}},{key:"render_product",value:function(){return r.a.createElement("div",{style:{float:"left",width:"100%"}},r.a.createElement("h3",{style:{textAlign:"center"}}," Store: ",this.state.store),this.renderDiscountAndPolicyButtons(),r.a.createElement("table",{style:_e},r.a.createElement("tr",null,r.a.createElement("th",{style:xe}," Product Name "),r.a.createElement("th",{style:xe}," Category "),r.a.createElement("th",{style:xe}," Amount "),r.a.createElement("th",{style:xe}," Price "),r.a.createElement("th",{style:xe}," Purchase Type ")),this.render_product_table()))}},{key:"render",value:function(){return r.a.createElement(m,null,r.a.createElement(oe,{state:this.props.location.state}),r.a.createElement(D,{title:"Watch Stores And Products"}),r.a.createElement("div",null,r.a.createElement(D,{title:"Stores :"}),this.render_stores(),this.state.showProducts?this.render_product():""))}}]),n}(n.Component),_e={width:"99%",textAlign:"center",border:"2px solid black"},xe={borderBottom:"2px solid black"},De=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).renderTitle=n.renderTitle.bind(Object(h.a)(n)),n.renderCart=n.renderCart.bind(Object(h.a)(n)),n.renderProduct=n.renderProduct.bind(Object(h.a)(n)),n}return Object(i.a)(a,[{key:"renderTitle",value:function(){return 0===this.props.cart.products.length?"your cart is empty":"products in my cart:"}},{key:"handleBuyCart",value:function(){this.props.cart.products=[],this.setState({})}},{key:"renderCart",value:function(){var e=this,t=[];return t.push(r.a.createElement("div",null,r.a.createElement("div",{style:{width:"100%"}},r.a.createElement("div",{style:{float:"left",width:"90%"}}),r.a.createElement("div",{style:{float:"left",width:"10%"}},r.a.createElement(x,{text:"Buy Cart",onClick:function(){v(e.props.history,"/buyCart",e.props.pathname,e.props.state)}}))),r.a.createElement("table",{style:we},r.a.createElement("tr",null,r.a.createElement("th",{style:{borderBottom:"1px solid black"}}),r.a.createElement("th",{style:{borderBottom:"1px solid black"}},"product name"),r.a.createElement("th",{style:{borderBottom:"1px solid black"}},"store"),r.a.createElement("th",{style:{borderBottom:"1px solid black"}},"category"),r.a.createElement("th",{style:{borderBottom:"1px solid black"}},"price per unit"),r.a.createElement("th",{style:{borderBottom:"1px solid black"}},"purchase type"),r.a.createElement("th",{style:{borderBottom:"1px solid black"}},"amount"),r.a.createElement("th",{style:{borderBottom:"1px solid black"}}),r.a.createElement("th",{style:{borderBottom:"1px solid black"}})),this.renderProduct(this.props.cart.products)))),t}},{key:"renderProduct",value:function(e){var t=this,a=[];return e.forEach((function(e){a.push(r.a.createElement(ce,null,r.a.createElement(x,{text:"X",onClick:function(a){return t.props.handleDelete(a,e)}}),r.a.createElement("th",null,e.productName),r.a.createElement("th",null,e.storeName),r.a.createElement("th",null,e.category),r.a.createElement("th",null,e.price),r.a.createElement("th",null,e.purchaseType),r.a.createElement("th",null,e.amount),r.a.createElement("th",null,r.a.createElement("input",{type:"number",min:1,onChange:function(t){return e.amount=parseInt(t.target.value)}})),r.a.createElement(x,{text:"Edit",onClick:function(a){return t.props.handleEdit(a,e,e.amount)}})))})),a}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(D,{title:this.renderTitle()}),this.renderCart())}}]),a}(n.Component),we={color:"black",padding:"1px",margin:"10px",lineHeight:5,fontFamily:"Arial",border:"1px solid black",width:"99%"},je=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).getCart=n.getCart.bind(Object(h.a)(n)),n.getPromise=n.getPromise.bind(Object(h.a)(n)),n.handleDelete=n.handleDelete.bind(Object(h.a)(n)),n.renderDelete=n.renderDelete.bind(Object(h.a)(n)),n.handleEdit=n.handleEdit.bind(Object(h.a)(n)),n.promiseEdit=n.promiseEdit.bind(Object(h.a)(n)),n.state={cart:{priceBeforeDiscount:0,products:[]},cartPrice:0},n.pathname="/viewMyCart",n.getCart(),n}return Object(i.a)(a,[{key:"getPromise",value:function(e){null==e?alert("Server Failed"):"Success"!==""+e.reason?alert("Cant revcive cart"):this.setState({cart:e.value,cartPrice:e.value.priceBeforeDiscount})}},{key:"getCart",value:function(){var e=this.props.location.state.id;C("/home/cart?id="+e,"GET","",this.getPromise)}},{key:"handleDelete",value:function(e,t){var a=this,n=this.props.location.state.id,r={productName:t.productName,storeName:t.storeName,amount:t.amount};C("/home/cart/delete?id="+n,"POST",r,(function(e){a.renderDelete(e,t)}))}},{key:"renderDelete",value:function(e,t){if(e&&e.value){var a=this.state.cart.products.indexOf(t);-1!==a&&this.state.cart.products.splice(a,1),this.getCart(),alert("Product Deleted")}else alert("Invalid Product!")}},{key:"handleEdit",value:function(e,t,a){var n=this.props.location.state.id,r={productName:t.productName,storeName:t.storeName,amount:a};C("/home/cart/edit?id="+n,"POST",r,this.promiseEdit)}},{key:"promiseEdit",value:function(e){(console.log(e),null==e)?alert("Server Crashed"):"Success"===""+e.reason?(alert("Edit Product Amount Successfully"),this.getCart()):alert("Cant Edit Product. Please try again.")}},{key:"render",value:function(){return r.a.createElement(m,null,r.a.createElement(oe,{state:this.props.location.state}),r.a.createElement(De,{cart:this.state.cart,history:this.props.history,state:this.props.location.state,pathname:this.pathname,cartPrice:this.state.cartPrice,handleDelete:this.handleDelete,handleEdit:this.handleEdit}))}}]),a}(n.Component),Te=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).handleChangedAmount=n.handleChangedAmount.bind(Object(h.a)(n)),n.handleAdd=n.handleAdd.bind(Object(h.a)(n)),n.addPromise=n.addPromise.bind(Object(h.a)(n)),n.state={product:n.props.location.state.product,amount:1},n}return Object(i.a)(a,[{key:"renderProducts",value:function(){var e=this.state.product;return void 0===this.state.product?r.a.createElement("h3",null," Didn't selected product "):r.a.createElement("table",{style:Ne},r.a.createElement("tr",null,r.a.createElement("th",{style:Fe}," Product Name "),r.a.createElement("th",{style:Fe}," Store Name "),r.a.createElement("th",{style:Fe}," Category "),r.a.createElement("th",{style:Fe}," Amount "),r.a.createElement("th",{style:Fe}," Price "),r.a.createElement("th",{style:Fe}," Purchase Type ")),r.a.createElement("tr",null,r.a.createElement("th",null," ",e.productName," "),r.a.createElement("th",null," ",e.storeName," "),r.a.createElement("th",null," ",e.category," "),r.a.createElement("th",null," ",e.amount," "),r.a.createElement("th",null," ",e.price," "),r.a.createElement("th",null," ",e.purchaseType," ")))}},{key:"addPromise",value:function(e){if(null==e)alert("Server Failed");else{var t=""+e.reason;"Not_Found"==t?(alert("Product dosen't in the store any more. Went to menu"),v(this.props.history,"/subscribe",this.pathname,this.props.location.state)):"Invalid_Product"==t?(alert("Product is already in your cart, if you wasn't to add more please edit your cart. Went to menu"),v(this.props.history,"/subscribe",this.pathname,this.props.location.state)):"Store_Not_Found"==t?(alert("the store isn't exiist please try with a different store. Went to menu"),v(this.props.history,"/subscribe",this.pathname,this.props.location.state)):"Success"==t?(alert("Product Added to Cart."),v(this.props.history,"/viewMyCart",this.pathname,this.props.location.state)):alert(t+", Cant Add Product to Cart")}}},{key:"handleAdd",value:function(){if(this.state.amount>this.state.product.amount)alert("wrong amont selected");else{var e={productName:this.state.product.productName,storeName:this.state.product.storeName,amount:this.state.amount},t=this.props.location.state.id;C("/home/cart?id="+t,"POST",e,this.addPromise)}}},{key:"handleChangedAmount",value:function(e){this.setState({amount:e.target.value})}},{key:"render",value:function(){var e=this;return r.a.createElement(m,null,r.a.createElement(oe,{state:this.props.location.state}),r.a.createElement("body",null,r.a.createElement(D,{title:"Add product to cart"}),this.renderProducts(),r.a.createElement(ge,{title:"Choose amount to cart:",type:"number",min:1,value:this.state.amount,onChange:this.handleChangedAmount}),r.a.createElement("div",null,r.a.createElement(x,{text:"add",onClick:this.handleAdd}))),r.a.createElement(x,{text:"back",onClick:function(){return v(e.props.history,e.props.location.fromPath,e.pathname,e.props.location.state)}}))}}]),a}(n.Component),Ne={width:"99%",textAlign:"center",border:"2px solid black"},Fe={borderBottom:"2px solid black"},Me=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(l.a)(this,a),(e=t.call(this)).getProducts=e.getProducts.bind(Object(h.a)(e)),e.deleteProduct=e.deleteProduct.bind(Object(h.a)(e)),e.state={products:[],updated_products:!1,productName:void 0,category:"",amount:0,price:0,reviews:[],purchase:""},e.store="hanut",e}return Object(i.a)(a,[{key:"getProducts",value:function(){var e=this;!1===this.state.updated_products&&C("/home/product?store="+this.props.location.state.storeName,"GET","",(function(t){if(null===t)alert("Server Failed");else{var a=""+t.reason;"Success"===a?(console.log(t.value),e.setState({products:t.value,updated_products:!0})):"Store_Not_Found\u200f"===a?(alert("Store Not Found. Soryy."),v(e.props.history,"/storeManagement","",e.props.location.state)):(alert("Cant Access products"),v(e.props.history,"/storeManagement","",e.props.location.state))}}))}},{key:"render_product_table",value:function(){var e=this,t=this.state.products,a=[];return t.forEach((function(t){return a.push(r.a.createElement(ce,{onClick:function(){return function(t){console.log("Reviews"),console.log(t.reviews),e.setState({productName:t.productName,category:t.category,amount:t.amount,price:t.price,purchase:t.purchaseType,reviews:t.reviews})}(t)}},r.a.createElement("th",null," ",t.productName," "),r.a.createElement("th",null," ",t.category," "),r.a.createElement("th",null," ",t.amount," "),r.a.createElement("th",null," ",t.price," "),r.a.createElement("th",null," ",t.purchaseType," ")))})),a}},{key:"render_product",value:function(){return this.getProducts(),r.a.createElement("div",null,r.a.createElement("h3",null,this.state.store),r.a.createElement("table",{style:Be},r.a.createElement("tr",null,r.a.createElement("th",{style:Re}," Product Name "),r.a.createElement("th",{style:Re}," Category "),r.a.createElement("th",{style:Re}," Amount "),r.a.createElement("th",{style:Re}," Price "),r.a.createElement("th",{style:Re}," Purchase Type ")),this.render_product_table()))}},{key:"deleteProduct",value:function(){var e=this,t={};t.productName=this.state.productName,t.storeName=this.props.location.state.storeName,t.category=this.state.category,t.amount=this.state.amount,t.price=this.state.price,t.purchaseType=this.state.purchase;var a=this.props.location.state.id;C("/home/product/delete?id="+a,"POST",t,(function(t){if(null===t)alert("Server Failed");else{var a=""+t.reason;"Invalid_Product"==a?(alert("The product data isnt valid."),v(e.props.history,"/storeManagement",e.pathname,e.props.location.state)):"Store_Not_Found\u200f"==a?(alert("Store doesn't Exits. Go back to main menu"),v(e.props.history,"/storeManagement",e.pathname,e.props.location.state)):"Dont_Have_Permission\u200f"==a?(alert("User Doesnt have premission for that. By By"),v(e.props.history,"/storeManagement",e.pathname,e.props.location.state)):"Success"==a?(alert("Product Deleted"),e.setState({productName:void 0,category:"",amount:1,price:1,updated_products:!1})):(alert(" Cant Delete product. Try again later to Store"),v(e.props.history,"/storeManagement",e.pathname,e.props.location.state))}}))}},{key:"render_reviews",value:function(){if(0===this.state.reviews.length)return r.a.createElement("p",{style:{textAlign:"center"}}," Didnt have reviews yet");var e=[];return this.state.reviews.forEach((function(t){e.push(r.a.createElement(j,null,r.a.createElement("div",null,r.a.createElement("div",{style:{float:"left",width:"30%"}},r.a.createElement("p",{style:{textAlign:"center"}}," Writer: ",t.writer," ")),r.a.createElement("div",{style:{float:"left",width:"69%"}},r.a.createElement("p",{style:{textAlign:"center"}}," ",t.content," ")))))})),e}},{key:"render_selected_product",value:function(){return void 0===this.state.productName?"":r.a.createElement("div",null,r.a.createElement("div",{style:{margin:2,width:"30%",float:"left",padding:0,border:"2px solid #89CCC1"}},r.a.createElement("h2",{style:{textAlign:"center",backgroundColor:"#89CCC1",marginTop:0}},this.state.productName," "),r.a.createElement("p",{style:{textAlign:"center"}}," Category: ",this.state.category," "),r.a.createElement("p",{style:{textAlign:"center"}}," Amount: ",this.state.amount," "),r.a.createElement("p",{style:{textAlign:"center"}}," Price: ",this.state.price," "),r.a.createElement("p",{style:{textAlign:"center"}}," purchaseType: ",this.state.purchaseType," "),r.a.createElement(x,{text:"Delete",onClick:this.deleteProduct})),r.a.createElement("div",{style:{width:"67.5%",float:"left"}},r.a.createElement("h2",{style:{textAlign:"center",marginTop:0}}," Reviews "),this.render_reviews()))}},{key:"render",value:function(){return r.a.createElement(m,null,r.a.createElement(oe,{state:this.props.location.state}),r.a.createElement(D,{title:"View Products In Store"}),r.a.createElement("h2",{style:{textAlign:"center"}},this.props.location.state.storeName),this.render_product(),this.render_selected_product())}}]),a}(n.Component),Be={width:"99%",textAlign:"center",border:"2px solid black"},Re={borderBottom:"2px solid black"},Le=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){var e="";return null!=this.props.error&&(e="2px solid red"),r.a.createElement("div",{style:{marginLeft:"30%",marginRight:"30%",padding:5,border:e}},r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement("label",{style:{marginLeft:5,marginRight:12}}," ",this.props.title," ")),r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement("textarea",{style:{textAlign:"left"},rows:this.props.rows,cols:this.props.cols,value:this.props.value,onChange:this.props.onChange})),r.a.createElement("div",{style:{textAlign:"center"}},null!=this.props.error?r.a.createElement("lable",{style:Ie}," ",this.props.error," "):""))}}]),a}(n.Component),Ie={textAlign:"center",color:"red",fontFamily:"Arial",width:"99%"},qe=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(l.a)(this,a),(e=t.call(this)).handleStores=e.handleStores.bind(Object(h.a)(e)),e.handleRequest=e.handleRequest.bind(Object(h.a)(e)),e.buildStores=e.buildStores.bind(Object(h.a)(e)),e.create_stores=e.create_stores.bind(Object(h.a)(e)),e.handleSubmit=e.handleSubmit.bind(Object(h.a)(e)),e.sendRequesPromise=e.sendRequesPromise.bind(Object(h.a)(e)),e.state={stores:[],name:"",store:"",addRequest:!1},e}return Object(i.a)(a,[{key:"buildStores",value:function(e){if(null==e)alert("Server Failed");else{var t=""+e.reason;"Success"==t?this.setState({stores:e.value}):alert(t+", Cant Add Product to Store")}}},{key:"create_stores",value:function(){C("/store","GET","",this.buildStores)}},{key:"handleStores",value:function(e,t){this.setState({name:e.target.value,addRequest:!0,store:t})}},{key:"getStoreSelected",value:function(){for(var e,t=0;t<this.state.stores.length;t++)return this.state.stores[t].checked&&(e=this.state.stores[t].value),e}},{key:"render_stores_table",value:function(){var e=this,t=this.state.stores,a=[],n=0;return t.forEach((function(t){return a.push(r.a.createElement(ce,{onClick:function(a){return e.handleStores(a,t.name)}},r.a.createElement("th",null,t.name),r.a.createElement("th",null," ",t.description," ")))}),n+=1),a}},{key:"render_stores",value:function(){return r.a.createElement("table",{style:We},r.a.createElement("tr",null,r.a.createElement("th",{style:Ue}," Store Name "),r.a.createElement("th",{style:Ue}," Description ")),this.render_stores_table())}},{key:"handleRequest",value:function(e){this.setState({request:e.target.value})}},{key:"sendRequesPromise",value:function(e){if(null==e)alert("Server Failed");else{var t=""+e.reason;"Null_Request\u200f"===t?alert("Request is Null"):"Invalid_Request"===t?alert("Request is Not Valid"):"Success"===t?(alert("Request Added. Thank You"),v(this.props.history,"/subscribe",this.pathname,this.props.location.state)):alert(t+", Cant Add Review to Store")}}},{key:"handleSubmit",value:function(){var e={storeName:this.state.store,content:this.state.request},t=this.props.location.state.id;C("/store/request?id="+t,"POST",e,this.sendRequesPromise)}},{key:"render_request",value:function(){var e=this;return!1===this.state.addRequest?"":r.a.createElement("div",null,r.a.createElement("h3",null,this.state.store),r.a.createElement("table",{style:We},r.a.createElement("tr",null,r.a.createElement("th",null," Write the request: "),r.a.createElement("th",null,r.a.createElement(Le,{title:"Request:",rows:4,cols:50,value:this.state.request,onChange:this.handleRequest})),r.a.createElement("th",null,r.a.createElement(x,{text:"Submit",onClick:this.handleSubmit})))),r.a.createElement(x,{text:"cancel",onClick:function(){return e.setState({addRequest:!1})}}))}},{key:"render",value:function(){return this.create_stores(),r.a.createElement(m,null,r.a.createElement(oe,{state:this.props.location.state}),r.a.createElement("div",null,r.a.createElement(D,{title:"Stores:"}),r.a.createElement("div",null,this.render_stores(),r.a.createElement("h5",null,"To add a request to the store - choose a store and press on it.")),this.render_request()))}}]),a}(n.Component),We={width:"99%",textAlign:"center",border:"2px solid black"},Ue={borderBottom:"2px solid black"},Ge=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(l.a)(this,a),(e=t.call(this)).handleChangeName=e.handleChangeName.bind(Object(h.a)(e)),e.handleChangeDescription=e.handleChangeDescription.bind(Object(h.a)(e)),e.storeOpenPromise=e.storeOpenPromise.bind(Object(h.a)(e)),e.pathname="/openStore",e.state={storeName:"",storeDescription:""},e}return Object(i.a)(a,[{key:"handleChangeName",value:function(e){this.setState({storeName:e.target.value})}},{key:"handleChangeDescription",value:function(e){this.setState({storeDescription:e.target.value})}},{key:"handleOpen",value:function(e){var t={name:this.state.storeName,description:this.state.storeDescription},a=this.props.location.state.id;C("/store?id="+a,"POST",t,this.storeOpenPromise)}},{key:"storeOpenPromise",value:function(e){if(null==e)alert("Server Failed");else{var t=""+e.reason;if("Invalid_Store_Details"==t)alert("Invalid Store Details");else if("Store_Not_Found"==t)alert("Store Already Exites");else if("Store_Doesnt_Exist\u200f"==t)alert("Server Broken");else if("Success"==t){var a="Congratulation! The store "+this.state.storeName+" open.\nYou are the owner, enjoy!";alert(a);var n=this.props.location.state;n.storeName=this.state.storeName,v(this.props.history,"/manageProducts",this.pathname,n)}else alert(t+", Cant Open Store")}}},{key:"render",value:function(){var e=this;return r.a.createElement(m,null,r.a.createElement(oe,{state:this.props.location.state}),r.a.createElement(D,{title:"Open Store"}),r.a.createElement("div",null,r.a.createElement(ge,{title:"Store Name:",type:"text",value:this.state.storeName,onChange:this.handleChangeName}),r.a.createElement(Ve,{title:"Description: ",type:"text",value:this.state.storeDescription,onChange:this.handleChangeDescription}),r.a.createElement(x,{text:"Open",onClick:function(t){return e.handleOpen(t)}}),r.a.createElement(x,{text:"Back",onClick:function(){v(e.props.history,e.props.location.fromPath,e.pathname,e.props.location.state)}})))}}]),a}(n.Component),Ve=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{style:{marginLeft:"30%",marginRight:"30%",padding:15}},r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement("label",{style:{marginLeft:5,marginRight:12}}," ",this.props.title," ")),r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement("input",{type:this.props.type,value:this.props.value,onChange:this.props.onChange,size:40})))}}]),a}(ge),Ye=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(l.a)(this,a),(e=t.call(this)).pathname="/manageProducts",e.addClick=e.addClick.bind(Object(h.a)(e)),e.addProductPromise=e.addProductPromise.bind(Object(h.a)(e)),e.state={name:"",category:"",amount:1,price:1,purchase:"IMMEDDIATE"},e}return Object(i.a)(a,[{key:"addClick",value:function(){var e={};e.productName=this.state.name,e.storeName=this.props.location.state.storeName,e.category=this.state.category,e.amount=this.state.amount,e.price=this.state.price,e.purchaseType=this.state.purchase;var t=this.props.location.state.id;C("/home/product?id="+t,"POST",e,this.addProductPromise)}},{key:"addProductPromise",value:function(e){if(null==e)alert("Server Failed");else{var t=""+e.reason;"Invalid_Product"==t?alert("The product data isnt valid. please insert again"):"Store_Not_Found\u200f"==t?(alert("Store doesn't Exits. Go back to main menu"),v(this.props.history,"/subscribe",this.pathname,this.props.location.state)):"Dont_Have_Permission\u200f"==t?(alert("User Doesnt have premission for that. By By"),v(this.props.history,"/subscribe",this.pathname,this.props.location.state)):"Already_Exists\u200f"==t?(alert("Product Already Exits, Please insert Again"),this.setState({name:""})):"Success"==t?(alert("Product Added. Go to Store mangment"),v(this.props.history,"/storeManagement",this.pathname,this.props.location.state)):alert(t+", Cant Add Product to Store")}}},{key:"render",value:function(){var e=this;return r.a.createElement(m,null,r.a.createElement(oe,{state:this.props.location.state}),r.a.createElement(D,{title:"Add Product To Store:"}),r.a.createElement("h2",{style:{textAlign:"center"}},this.props.location.state.storeName),r.a.createElement(ge,{type:"text",title:"Product Name:",value:this.state.name,onChange:function(t){e.setState({name:t.target.value})}}),r.a.createElement(ge,{type:"text",title:"Category:",value:this.state.category,onChange:function(t){e.setState({category:t.target.value})}}),r.a.createElement(ge,{type:"number",min:1,title:"Amount:",value:this.state.amount,onChange:function(t){e.setState({amount:t.target.value})}}),r.a.createElement(ge,{type:"number",min:1,title:"Price",value:this.state.price,onChange:function(t){e.setState({price:t.target.value})}}),r.a.createElement(ge,{type:"text",title:"Purchase Type:",value:this.state.purchase,onChange:function(){}}),r.a.createElement(x,{text:"Add",onClick:this.addClick}))}}]),a}(n.Component),He="Domain.Discount.AndDiscount",Xe="Domain.Discount.OrDiscount",ze="Domain.Discount.XorDiscount",Je="Domain.Discount.ProductTermDiscount",Ze=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(l.a)(this,a),(e=t.call(this)).storeDiscounts=[],e.simpleDiscounts=[],e.selectedDiscounts=[],e.comlicatedDiscounts=[],e.termDiscounts=[],e.selectedProductsTerms=[],e.targetProductTerm=void 0,e.pathname="/manageDiscount",e.state={products:[],store_amount:1,store_precentag:1,chosenDiscount:void 0,selectedProduct:void 0,selectedProductSimpleDiscount:void 0,simple_precentag:1,selectedProudctTerm:void 0,target_amount:1},e.renderProducts=e.renderProducts.bind(Object(h.a)(e)),e}return Object(i.a)(a,[{key:"addStoreDiscount",value:function(){var e={minAmount:this.state.store_amount,percentage:this.state.store_precentag};e.percentage<=100&&e.minAmount>0&&(this.storeDiscounts.push({CLASSNAME:"Domain.Discount.StoreDiscount",DATA:e}),this.setState({}))}},{key:"addDiscountToSelectedDiscounts",value:function(e){this.selectedDiscounts.push(e),this.setState({})}},{key:"renderStoreDiscontList",value:function(){var e=this;if(0!==this.storeDiscounts.length){var t=[r.a.createElement("h2",{style:Qe}," Discounts ")];return this.storeDiscounts.forEach((function(a){t.push(r.a.createElement("div",{style:{borderBottom:"1px solid black",textAlign:"center"}},r.a.createElement("table",{style:{width:"100%"}},r.a.createElement(j,null,r.a.createElement("p",{style:{backgroundColor:"#FFC242",height:30,marginTop:0}}," Discont"),r.a.createElement("p",{style:{margin:2}}," Amount: ",a.DATA.minAmount," "),r.a.createElement("p",{style:{margin:4}}," Precentage: ",a.DATA.percentage," % "))),r.a.createElement(Ke,{selectClick:function(){return t=a,e.storeDiscounts.splice(e.storeDiscounts.indexOf(t),1),void e.setState({chosenDiscount:t});var t},comlicatedClick:function(){return function(t){e.addDiscountToSelectedDiscounts(t),e.storeDiscounts.splice(e.storeDiscounts.indexOf(t),1),e.setState({})}(a)},deleteClick:function(){return function(t){e.storeDiscounts.splice(e.storeDiscounts.indexOf(t),1),e.setState({})}(a)}})))})),t}}},{key:"renderStoreDiscount",value:function(e){var t=this;return r.a.createElement("div",{style:{float:"left",width:e,borderLeft:"1px solid black",height:1e3}},r.a.createElement("h2",{style:Qe}," Store Discount "),r.a.createElement("div",null,r.a.createElement($e,{title:"Minmum Price:",type:"number",min:0,value:this.state.store_amount,onChange:function(e){t.setState({store_amount:e.target.value})}}),r.a.createElement($e,{title:"Discount Precentage:",type:"number",min:0,max:100,value:this.state.store_precentag,onChange:function(e){t.setState({store_precentag:e.target.value})}}),r.a.createElement(x,{text:"Add",onClick:function(){return t.addStoreDiscount()}})),r.a.createElement("div",null,this.renderStoreDiscontList()))}},{key:"renderSelectedProductPicked",value:function(){var e=this.state.selectedProduct;return void 0===e?"":r.a.createElement(j,{style:{borderBottom:"1px solid black",textAlign:"center",marginTop:0}},r.a.createElement("h3",{style:{marginTop:0,borderBottom:"1px solid black",backgroundColor:"#FFC242"}}," ",e.productName," "),r.a.createElement("p",null," Price: ",e.price," $ "),r.a.createElement("p",null," Category: ",e.category," "),r.a.createElement("p",null," Type: ",e.purchaseType," "))}},{key:"renderSelectedProduct",value:function(e){var t=this;return r.a.createElement("div",null,r.a.createElement("h2",{style:Qe}," Selected Product "),r.a.createElement("div",{style:{padding:4}},this.renderSelectedProductPicked(),r.a.createElement("div",{style:{float:"left",width:"50%"}},r.a.createElement(x,{text:"Select as Simple Discount",onClick:function(){t.setState({selectedProduct:void 0,selectedProductSimpleDiscount:t.state.selectedProduct})}})),r.a.createElement("div",{style:{float:"left",width:"50%"}},r.a.createElement(x,{text:"Select as Term Product",onClick:function(){t.setState({selectedProduct:void 0,selectedProudctTerm:t.state.selectedProduct})}}))))}},{key:"renderSimpleDiscontSelection",value:function(){var e=this,t=function(){var t={},a=e.state.selectedProductSimpleDiscount.productName;t.CLASSNAME="Domain.Discount.RegularDiscount",t.DATA={product:a,percantage:e.state.simple_precentag},e.simpleDiscounts.push(t),e.setState({selectedProductSimpleDiscount:void 0})};return void 0===this.state.selectedProductSimpleDiscount?r.a.createElement("p",{style:{textAlign:"center"}}," No product Selected "):r.a.createElement("div",null,this.renderProduct(this.state.selectedProductSimpleDiscount,t),r.a.createElement($e,{title:"Discount Prcentage:",type:"number",min:0,max:100,value:this.state.simple_precentag,onChange:function(t){e.setState({simple_precentag:t.target.value})}}),r.a.createElement(x,{text:"Select",onClick:t}))}},{key:"renderSimpleDiscountList",value:function(){var e=this;if(0!==this.simpleDiscounts.length){var t=[r.a.createElement("h4",{style:Qe},"Discounts ")];return this.simpleDiscounts.forEach((function(a){t.push(r.a.createElement(j,null,r.a.createElement("p",{style:{backgroundColor:"lightgreen",marginTop:0}}," Simple Discount "),r.a.createElement("p",{style:{textAlign:"center"}},"Product: ",a.DATA.product," "),r.a.createElement("p",{style:{textAlign:"center"}},"Precentage: ",a.DATA.percantage," % "),r.a.createElement(Ke,{selectClick:function(){return function(t){e.simpleDiscounts.splice(e.simpleDiscounts.indexOf(t),1),e.setState({chosenDiscount:t})}(a)},comlicatedClick:function(){return function(t){e.addDiscountToSelectedDiscounts(t),e.simpleDiscounts.splice(e.simpleDiscounts.indexOf(t),1),e.setState({})}(a)},deleteClick:function(){return function(t){e.simpleDiscounts.splice(e.simpleDiscounts.indexOf(t),1),e.setState({})}(a)}})))})),t}}},{key:"renderSimpleDiscount",value:function(e){return r.a.createElement("div",{style:{float:"left",width:e,borderRight:"1px solid black",marginBottom:0}},r.a.createElement("h3",{style:Qe}," Simple Discount "),this.renderSimpleDiscontSelection(),r.a.createElement("div",null,this.renderSimpleDiscountList()))}},{key:"renderTermByClass",value:function(e){var t=this,a="Simple Term";switch(e.CLASSNAME){case"Domain.Discount.Term.BaseTerm":return r.a.createElement(j,null,r.a.createElement("p",{style:{backgroundColor:"pink",marginTop:0}},a),r.a.createElement("p",{style:{textAlign:"center"}}," product: ",e.DATA.product," "),r.a.createElement("p",{style:{textAlign:"center"}}," amount: ",e.DATA.amount," "));case"Domain.Discount.Term.AndTerm":a="AND Term";break;case"Domain.Discount.Term.OrTerm":a="OR Term";break;case"Domain.Discount.Term.XorTerm":a="XOR Term"}return r.a.createElement(j,null,r.a.createElement("p",{style:{backgroundColor:"#E640B5",marginTop:0}},a),r.a.createElement("div",{style:{padding:3}},function(e){var a=[];return e.forEach((function(e){a.push(t.renderTermByClass(e))})),a}(e.DATA.terms)))}},{key:"renderTermsList",value:function(){var e=this,t=[];return this.selectedProductsTerms.forEach((function(a){t.push(r.a.createElement("div",{style:{textAlign:"center"}},e.renderTermByClass(a),r.a.createElement("button",{style:et,onClick:function(){return function(t){e.selectedProductsTerms.splice(e.selectedProductsTerms.indexOf(t),1),e.setState({})}(a)}}," X ")))})),t}},{key:"renderTermsSelected",value:function(){var e=this,t=this.selectedProductsTerms,a=function(){return!(e.selectedProductsTerms.length<=1)||(alert("please select more then 1 term to create complex terms."),!1)};return 0===t.length?r.a.createElement("p",{style:{textAlign:"center"}}," No Terms Selected "):r.a.createElement("div",{style:{float:"left",width:"100%"}},r.a.createElement("h4",{style:Qe}," Selected Terms "),r.a.createElement("div",{style:{overflowY:"scroll"}},this.renderTermsList()),r.a.createElement("div",null,r.a.createElement("div",{style:{float:"left",width:"33%"}},r.a.createElement(x,{text:"AND",onClick:function(){if(a()){var t=e.selectedProductsTerms,n={CLASSNAME:"Domain.Discount.Term.AndTerm"};n.DATA={terms:t},e.selectedProductsTerms=[],e.selectedProductsTerms.push(n),e.setState({})}}})),r.a.createElement("div",{style:{float:"left",width:"33%"}},r.a.createElement(x,{text:"OR",onClick:function(){if(a()){var t=e.selectedProductsTerms,n={CLASSNAME:"Domain.Discount.Term.OrTerm"};n.DATA={terms:t},e.selectedProductsTerms=[],e.selectedProductsTerms.push(n),e.setState({})}}})),r.a.createElement("div",{style:{float:"left",width:"33%"}},r.a.createElement(x,{text:"XOR",onClick:function(){if(a()){var t=e.selectedProductsTerms,n={CLASSNAME:"Domain.Discount.Term.XorTerm"};n.DATA={terms:t},e.selectedProductsTerms=[],e.selectedProductsTerms.push(n),e.setState({})}}})),r.a.createElement("p",null)))}},{key:"renderTargetTerm",value:function(){var e=this,t=this.state.selectedProudctTerm;if(void 0===t)return r.a.createElement("p",{style:{textAlign:"center"}}," No Proudct Select to Term ");return r.a.createElement("div",{style:{marginBottom:2}},r.a.createElement(j,null,r.a.createElement("h3",{style:{marginTop:0,borderBottom:"1px solid black",backgroundColor:"#FFC242"}}," ",t.productName," "),r.a.createElement($e,{title:"amount",type:"number",min:1,value:this.state.target_amount,onChange:function(t){return e.setState({target_amount:t.target.value})}}),r.a.createElement("p",null)),r.a.createElement("div",{style:{float:"left",width:"50%"}},r.a.createElement(x,{text:"Select as target Term Discount",onClick:function(){e.targetProductTerm=e.state.selectedProudctTerm,e.targetProductTerm.amount=e.state.target_amount,e.setState({selectedProudctTerm:void 0,target_amount:0})}})),r.a.createElement("div",{style:{float:"left",width:"50%"}},r.a.createElement(x,{text:"Select as Term Discount",onClick:function(){if(void 0!==e.selectedProductsTerms){var t={};t.product=e.state.selectedProudctTerm.productName,t.amount=e.state.target_amount;var a={CLASSNAME:"Domain.Discount.Term.BaseTerm",DATA:t};e.selectedProductsTerms.push(a)}e.setState({selectedProudctTerm:void 0})}})))}},{key:"renderTragetProduct",value:function(){var e=this;if(void 0===this.targetProductTerm)return r.a.createElement("p",{style:{textAlign:"center"}}," No Target Product Selected ");var t=this.targetProductTerm;return r.a.createElement("div",{style:{float:"left",width:"100%",textAlign:"center",border:"1px solid black",margin:2}},r.a.createElement("h4",{style:{backgroundColor:"pink",marginTop:0}}," Target Product "),r.a.createElement("p",null," Proudct: ",t.productName," "),r.a.createElement("p",null," amount: ",t.amount," "),r.a.createElement(x,{text:"Create Term Discount",onClick:function(){if(0===e.selectedProductsTerms.length)alert("no products term selected. please select before create a term discount");else if(e.selectedProductsTerms.length>1)alert("please select only 1 term.");else{var t={};t.CLASSNAME=Je,t.DATA={term:e.selectedProductsTerms[0],product:e.targetProductTerm.productName,amount:e.targetProductTerm.amount},e.comlicatedDiscounts.push(t),e.targetProductTerm=void 0,e.selectedProductsTerms=[],e.setState({})}}}))}},{key:"renderTermDiscount",value:function(e){return r.a.createElement("div",{style:{float:"left",width:e}},r.a.createElement("h3",{style:Qe}," Term Discount "),this.renderTargetTerm(),this.renderTragetProduct(),this.renderTermsSelected())}},{key:"renderProduct",value:function(e,t){return void 0===e?r.a.createElement("p",{style:{color:"red"}}):r.a.createElement("div",null,r.a.createElement(j,{style:{borderBottom:"1px solid black",textAlign:"center"},onClick:function(){return t(e)}},r.a.createElement("h3",{style:{marginTop:0,borderBottom:"1px solid black",backgroundColor:"#FFC242"}}," ",e.productName," "),r.a.createElement("p",null," Price: ",e.price," $ "),r.a.createElement("p",null," Type: ",e.purchaseType," ")))}},{key:"renderProductsList",value:function(e){var t=this,a=[],n=function(e){t.setState({selectedProduct:e})};return e.forEach((function(e){a.push(t.renderProduct(e,n))})),a}},{key:"getProducts",value:function(e){var t=this;C("/home/product?store="+e,"GET","",(function(e){null==e?alert("Server Failed"):"Success"===""+e.reason?t.setState({products:e.value}):(alert("Cant get Products from store. please try again later"),v(t.props.history,"/storeManagement","",t.props.location.state))}))}},{key:"renderProducts",value:function(e){return 0===this.state.products.length&&this.getProducts(this.props.location.state.storeName),r.a.createElement("div",{style:{float:"left",width:e,borderRight:"1px solid black",overflowY:"scroll",height:1e3}},r.a.createElement("h2",{style:Qe}," Products "),this.renderProductsList(this.state.products))}},{key:"renderDiscountByClass",value:function(e,t){var a=this,n=function(e){a.selectedDiscounts.splice(a.selectedDiscounts.indexOf(e),1),a.setState({})};switch(e.CLASSNAME){case"Domain.Discount.StoreDiscount":return r.a.createElement("div",null,r.a.createElement(j,{style:{margin:4}},r.a.createElement("p",{style:{backgroundColor:"#FFC242",height:30,marginTop:0}}," Discont"),r.a.createElement("p",{style:{margin:2}}," Amount: ",e.DATA.minAmount," "),r.a.createElement("p",{style:{margin:2}}," Precentage: ",e.DATA.percentage," % "),t?r.a.createElement("button",{style:et,onClick:n}," X"):""));case He:case ze:case Xe:return r.a.createElement("div",{style:{padding:2}},this.renderComlicatedByClass(e,!1));case"Domain.Discount.RegularDiscount":return r.a.createElement(j,null,r.a.createElement("p",{style:{backgroundColor:"lightgreen",marginTop:0}}," Simple Discount "),r.a.createElement("p",{style:{textAlign:"center"}},"Product: ",e.DATA.product," "),r.a.createElement("p",{style:{textAlign:"center"}},"Precentage: ",e.DATA.percantage," % "),t?r.a.createElement("button",{style:et,onClick:n}," X"):"");case Je:var s=e.DATA.term,o=e.DATA.product,l=e.DATA.amount;return r.a.createElement(j,null,r.a.createElement("p",{style:{backgroundColor:"#CC84F0",textAlign:"center",marginTop:0}}," Term Discount "),r.a.createElement("p",{style:{textAlign:"center"}}," Product: ",o),r.a.createElement("p",{style:{textAlign:"center"}}," Amount: ",l),r.a.createElement("div",{style:{padding:4}},this.renderTermByClass(s)))}}},{key:"renderSelectedDiscountList",value:function(e,t){var a=this,n=[];switch(e.CLASSNAME){case Je:return n.push(this.renderDiscountByClass(e,t)),n;case ze:case Xe:case He:return e.DATA.discounts.forEach((function(e){n.push(a.renderDiscountByClass(e,t))})),n;default:return e.forEach((function(e){n.push(a.renderDiscountByClass(e,t))})),n}}},{key:"renderSelctedDiscounts",value:function(e){var t=this,a=function(e){t.comlicatedDiscounts.push(e),t.selectedDiscounts=[],t.setState({error_selected:void 0})};return r.a.createElement("div",{style:{overflowY:"scroll",height:1e3,width:e,borderLeft:"1px solid black"}},r.a.createElement("h2",{style:Qe}," Selected Discounts "),r.a.createElement("div",{style:{padding:4}},this.renderSelectedDiscountList(this.selectedDiscounts,!0)),r.a.createElement("p",{style:{color:"red"}}," ",void 0!==this.state.error_selected?this.state.error_selected:""," "),r.a.createElement("div",{style:{float:"left",width:"33%"}},r.a.createElement(x,{text:"AND",onClick:function(e){t.selectedDiscounts.length>1?a({CLASSNAME:He,DATA:{discounts:t.selectedDiscounts}}):1===t.selectedDiscounts.length?t.setState({error_selected:"please select more then 1 discount"}):t.setState({error_selected:"empty discounts"})}})),r.a.createElement("div",{style:{float:"left",width:"33%"}},r.a.createElement(x,{text:"OR",onClick:function(e){t.selectedDiscounts.length>1?a({CLASSNAME:Xe,DATA:{discounts:t.selectedDiscounts}}):1===t.selectedDiscounts.length?t.setState({error_selected:"please select more then 1 discount"}):t.setState({error_selected:"empty discounts"})}})),r.a.createElement("div",{style:{float:"left",width:"33%"}},r.a.createElement(x,{text:"XOR",onClick:function(e){t.selectedDiscounts.length>1?a({CLASSNAME:ze,DATA:{discounts:t.selectedDiscounts}}):1===t.selectedDiscounts.length?t.setState({error_selected:"please select more then 1 discount"}):t.setState({error_selected:"empty discounts"})}})),r.a.createElement("div",{style:{float:"left",width:"100%"}},r.a.createElement("h2",{style:Qe}," Complicated Discounts "),r.a.createElement("div",{style:{padding:10}},this.renderComplicatedDiscountList(!0))))}},{key:"renderComlicatedByClass",value:function(e,t){var a=this,n="";switch(e.CLASSNAME){case He:n="AND Discount";break;case Xe:n="OR Discount";break;case ze:n="XOR Discount"}return r.a.createElement("div",{style:{border:"1px solid black",textAlign:"center",marginBottom:5,backgroundColor:"white"}},r.a.createElement("p",{style:{borderBottom:"1px solid black",backgroundColor:"#47CEFF",marginTop:0}}," ",n," "),r.a.createElement("div",{style:{padding:10}},this.renderSelectedDiscountList(e,!1)),t?r.a.createElement(Ke,{selectClick:function(){return a.comlicatedDiscounts.splice(a.comlicatedDiscounts.indexOf(e),1),void a.setState({chosenDiscount:e})},comlicatedClick:function(){return function(e){a.addDiscountToSelectedDiscounts(e),a.comlicatedDiscounts.splice(a.comlicatedDiscounts.indexOf(e),1),a.setState({})}(e)},deleteClick:function(){return function(e){a.comlicatedDiscounts.splice(a.comlicatedDiscounts.indexOf(e),1),a.setState({})}(e)}}):"")}},{key:"renderComplicatedDiscountList",value:function(){var e=this,t=[];return this.comlicatedDiscounts.forEach((function(a){t.push(e.renderComlicatedByClass(a,!0))})),t}},{key:"renderSendDiscount",value:function(){var e=this;if(void 0!==this.state.chosenDiscount){var t=function(t){if(null===t)alert("Server Crashed pls try again layter");else{var a=""+t.reason;"Dont_Have_Permission"===a?(alert("You dont have premession to this action!"),v(e.props.history,"/storeManagement","",e.props.location.state)):"Invalid_Product"===a?(alert("Product dont exits in Store any more."),v(e.props.history,"/storeManagement","",e.props.location.state)):"Success"===a&&(alert("Discount Added to store"),e.setState({chosenDiscount:void 0,products:[]}))}};return r.a.createElement("div",{style:{width:"100%",marginBottom:10}},r.a.createElement("div",{style:{float:"left",width:"40%",paddingLeft:300}},this.renderDiscountByClass(this.state.chosenDiscount,!1)),r.a.createElement("div",{style:{float:"left",width:"29%"}},r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement(x,{text:"Cancle",onClick:function(){e.setState({chosenDiscount:void 0})}})),r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement(x,{text:"Send",onClick:function(){var a=e.props.location.state.id,n=e.state.chosenDiscount;C("/store/discount?id="+a+"&store="+e.props.location.state.storeName,"POST",n,t),alert("please wait this takes time")}}))))}}},{key:"render",value:function(){var e=this;return r.a.createElement(m,{height:1e3},r.a.createElement(oe,{state:this.props.location.state}),r.a.createElement(D,{title:"Discount Manager"}),r.a.createElement("h2",{style:{textAlign:"center",marginTop:0}},this.props.location.state.storeName),this.renderSendDiscount(),r.a.createElement("div",{style:{float:"left",height:1e3,width:"100%"}},this.renderProducts("15%"),r.a.createElement("div",{style:{float:"left",width:"84%"}},r.a.createElement("div",{style:{float:"left",width:"50%"}},this.renderSelectedProduct(),this.renderSimpleDiscount("50%"),this.renderTermDiscount("49.7%")),this.renderStoreDiscount("24%"),this.renderSelctedDiscounts("25%")),r.a.createElement(x,{text:"Back",onClick:function(){v(e.props.history,e.props.location.fromPath,e.pathname,e.props.location.state)}})))}}]),a}(n.Component),$e=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement("label",{style:{marginLeft:5,marginRight:12}}," ",this.props.title," ")),r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement("input",{style:{textAlign:"center"},type:this.props.type,min:this.props.min,max:this.props.max,value:this.props.value,onChange:this.props.onChange})))}}]),a}(n.Component),Ke=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement("table",{style:{width:"100%"}},r.a.createElement("tr",{sylte:{textAlign:"center"}},r.a.createElement("th",null,r.a.createElement("button",{style:tt,onClick:this.props.selectClick}," select ")," "),r.a.createElement("th",null,r.a.createElement("button",{style:tt,onClick:this.props.comlicatedClick}," complicated ")," "),r.a.createElement("th",null,r.a.createElement("button",{style:et,onClick:this.props.deleteClick}," X ")," ")))}}]),a}(n.Component),Qe={textAlign:"center",backgroundColor:"lightgray",borderBottom:"1px solid black",marginBottom:5},et={backgroundColor:"#B38118",margin:5},tt={backgroundColor:"#0041B3",color:"white"},at=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).handleManager=n.handleManager.bind(Object(h.a)(n)),n.handleCancel=n.handleCancel.bind(Object(h.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(h.a)(n)),n.getManagersAppointedByMe=n.getManagersAppointedByMe.bind(Object(h.a)(n)),n.getManagersPromise=n.getManagersPromise.bind(Object(h.a)(n)),n.render_managers_table=n.render_managers_table.bind(Object(h.a)(n)),n.render_manager=n.render_manager.bind(Object(h.a)(n)),n.renderManagers=n.renderManagers.bind(Object(h.a)(n)),n.deleteManagerPromise=n.deleteManagerPromise.bind(Object(h.a)(n)),n.pathname="/removeManagerFromStore",n.state={managers:"",showManagers:!1},n.getManagersAppointedByMe(),n}return Object(i.a)(a,[{key:"getManagersAppointedByMe",value:function(){var e=this.props.location.state.id,t=this.props.location.state.storeName;C("/home/managers/"+t+"?id="+e,"GET","",this.getManagersPromise)}},{key:"getManagersPromise",value:function(e){if(null==e)alert("Server Failed");else if(console.log(e),"Success"===""+e.reason){var t=e.value,a=[];t.forEach((function(e){a.push({name:e})})),this.setState({managers:a})}}},{key:"handleManager",value:function(e,t){this.setState({name:e.target.value,showManagers:!0,manager:t})}},{key:"handleSubmit",value:function(e){this.setState({showManagers:!1});var t=this.props.location.state.id,a=this.props.location.state.storeName,n={userName:this.state.manager,storeName:a};C("/managers/deleteManager/?id="+t,"POST",n,this.deleteManagerPromise)}},{key:"deleteManagerPromise",value:function(e){if(null==e)alert("Server Failed");else{console.log(e);var t=""+e.reason;"Success"===t?e.value?(alert("Deleted Manager successfully!"),this.getManagersAppointedByMe()):alert("Cannot delete Manager"):("User_Not_Found"===t||"Store_Not_Found"===t)&&alert("User Not Found")}}},{key:"handleCancel",value:function(e){e.preventDefault(),this.setState({showManagers:!1})}},{key:"render_managers_table",value:function(){var e=this,t=this.state.managers,a=[];return t&&t.forEach((function(t){return a.push(r.a.createElement(ce,{onClick:function(a){return e.handleManager(a,t.name)}},r.a.createElement("th",null,t.name)))})),a}},{key:"render_manager",value:function(){return r.a.createElement("table",{style:nt},r.a.createElement("tr",null,r.a.createElement("th",{style:rt}," manager: ")),this.render_managers_table())}},{key:"renderManagers",value:function(){return r.a.createElement("table",{style:nt},r.a.createElement("tr",null,r.a.createElement("h3",null," remove ",this.state.manager,"? ")))}},{key:"render",value:function(){var e=this;return r.a.createElement(m,null,r.a.createElement(oe,{state:this.props.location.state}),r.a.createElement("div",null,r.a.createElement(D,{title:"Delete manager from store:"}),!1===this.state.showManagers?this.render_manager():"",!1===this.state.showManagers?r.a.createElement(x,{text:"Back",onClick:function(){v(e.props.history,e.props.location.fromPath,e.pathname,e.props.location.state)}}):"",!0===this.state.showManagers?this.renderManagers():"",!0===this.state.showManagers?r.a.createElement(x,{text:"Remove",onClick:this.handleSubmit}):"",!0===this.state.showManagers?r.a.createElement(x,{text:"Back",onClick:this.handleCancel}):""))}}]),a}(n.Component),nt={width:"99%",textAlign:"center",border:"2px solid black"},rt={borderBottom:"2px solid black"},st=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(l.a)(this,a),(e=t.call(this)).create_stores=e.create_stores.bind(Object(h.a)(e)),e.buildstores=e.buildstores.bind(Object(h.a)(e)),e.pathname="/storeManagement",e.state={stores:[]},e.flag=!0,e}return Object(i.a)(a,[{key:"create_stores",value:function(){var e=this.props.location.state.id;this.flag&&(this.flag=!1,C("/managers/mystores?id="+e,"GET","",this.buildstores))}},{key:"buildstores",value:function(e){if(null==e)alert("Server Failed");else{var t=""+e.reason;"Success"==t?this.setState({stores:e.value}):"No_Stores_To_Manage"==t?alert("No Stores To Manage. Soryy."):alert(t+", Cant get your stores ")}}},{key:"render_stores",value:function(){return r.a.createElement("div",null,r.a.createElement("h3",null,"The stores of the ",this.state.permission," :"),r.a.createElement("table",{style:ot},r.a.createElement("tr",null,r.a.createElement("th",{style:lt}," Store Name "),r.a.createElement("th",{style:lt}," Description ")),this.render_stores_table()))}},{key:"render_stores_table",value:function(){var e=this,t=[];return this.state.stores.forEach((function(a){return t.push(r.a.createElement(ce,{onClick:function(){return function(t){e.props.location.state.storeName=t.name,v(e.props.history,"/storeMenu",e.pathname,e.props.location.state)}(a)}},r.a.createElement("th",null," ",a.name," "),r.a.createElement("th",null," ",a.description," ")))})),t}},{key:"pass",value:function(e,t){this.props.history.push({pathname:e,fromPath:"/storeManagement",storeName:t})}},{key:"render",value:function(){return this.create_stores(),r.a.createElement(m,null,r.a.createElement(oe,{state:this.props.location.state}),r.a.createElement(D,{title:"Manage Store"}),r.a.createElement("div",null,this.render_stores()))}}]),a}(n.Component),ot={width:"99%",textAlign:"center",border:"2px solid black"},lt={borderBottom:"2px solid black"},it=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(l.a)(this,a),(e=t.call(this)).handleSearch=e.handleSearch.bind(Object(h.a)(e)),e.handleMinPrice=e.handleMinPrice.bind(Object(h.a)(e)),e.handleMaxPrice=e.handleMaxPrice.bind(Object(h.a)(e)),e.handleSearchValue=e.handleSearchValue.bind(Object(h.a)(e)),e.create_products=e.create_products.bind(Object(h.a)(e)),e.buildProducts=e.buildProducts.bind(Object(h.a)(e)),e.pathname="/searchAndFilter",e.state={search:"NONE",searchValue:"",minPrice:0,maxPrice:"",filteredProducts:[]},e}return Object(i.a)(a,[{key:"create_products",value:function(){var e={search:this.state.search,value:this.state.searchValue,minPrice:this.state.minPrice,maxPrice:""==this.state.maxPrice?Number.MAX_SAFE_INTEGER:this.state.maxPrice,category:""};e.minPrice>e.maxPrice?alert("max price must be greater than min price. Soryy."):C("/home/product/filter","POST",e,this.buildProducts)}},{key:"buildProducts",value:function(e){if(null==e)alert("Server Failed");else{var t=""+e.reason;"Success"==t?this.setState({filteredProducts:e.value}):"Not_Valid_Filter"==t?alert("Not_Valid_Filter. Soryy."):alert(t+", Cant serach by those filters")}}},{key:"pass",value:function(e,t){this.props.history.push({pathname:e,fromPath:"/searchAndFilter",data:t})}},{key:"render_product_table",value:function(){var e=this,t=this.props.location.state,a=[];return this.state.filteredProducts.forEach((function(n){return a.push(r.a.createElement(ce,{onClick:function(){return function(a){t.product={productName:a.productName,storeName:a.storeName,category:a.category,amount:a.amount,price:a.price,purchaseType:a.purchaseType},v(e.props.history,"/addToCart",e.pathname,t)}(n)}},r.a.createElement("th",null," ",n.productName," "),r.a.createElement("th",null," ",n.storeName," "),r.a.createElement("th",null," ",n.category," "),r.a.createElement("th",null," ",n.amount," "),r.a.createElement("th",null," ",n.price," "),r.a.createElement("th",null," ",n.purchaseType," ")))})),a}},{key:"render_product",value:function(){return r.a.createElement("table",{style:ct},r.a.createElement("tr",null,r.a.createElement("th",{style:ut}," Product Name "),r.a.createElement("th",{style:ut}," Store Name "),r.a.createElement("th",{style:ut}," Category "),r.a.createElement("th",{style:ut}," Amount "),r.a.createElement("th",{style:ut}," Price "),r.a.createElement("th",{style:ut}," Purchase Type ")),this.render_product_table())}},{key:"handleSearch",value:function(e){this.setState({search:e.target.value})}},{key:"handleSearchValue",value:function(e){this.setState({searchValue:e.target.value})}},{key:"handleMinPrice",value:function(e){var t=parseFloat(e.target.value);this.setState({minPrice:t})}},{key:"handleMaxPrice",value:function(e){var t=parseFloat(e.target.value);this.setState({maxPrice:t})}},{key:"render",value:function(){return r.a.createElement(m,null,r.a.createElement(oe,{state:this.props.location.state}),r.a.createElement(D,{title:"Search And Filter Products"}),r.a.createElement("table",null,r.a.createElement("tr",null,r.a.createElement("th",null,r.a.createElement("label",null,"Search by:"),r.a.createElement("select",{onChange:this.handleSearch},r.a.createElement("option",{value:"NONE"},"none"),r.a.createElement("option",{value:"CATEGORY"},"category"),r.a.createElement("option",{value:"KEY_WORD"},"key word"),r.a.createElement("option",{value:"PRODUCT_NAME"},"product name"))),r.a.createElement("th",null,r.a.createElement(ge,{title:"Value:",type:"text",value:this.state.searchValue,onChange:this.handleSearchValue}))),r.a.createElement("tr",null,r.a.createElement("th",null,r.a.createElement(ge,{title:"MinPrice",type:"number",min:0,max:Number.MAX_SAFE_INTEGER,value:this.state.minPrice,onChange:this.handleMinPrice}))),r.a.createElement("tr",null,r.a.createElement("th",null,r.a.createElement(ge,{title:"MaxPrice",type:"number",min:1,max:Number.MAX_SAFE_INTEGER,value:this.state.maxPrice,onChange:this.handleMaxPrice}))),r.a.createElement("tr",null,r.a.createElement("th",null,r.a.createElement(x,{text:"Submit",onClick:this.create_products})))),r.a.createElement("div",null,r.a.createElement("h3",{style:{textAlign:"center"}}," Filtered Products "),this.render_product()))}}]),a}(n.Component),ct={width:"99%",textAlign:"center",border:"2px solid black",lineHeight:1.5,margin:7.5},ut={borderBottom:"2px solid black"},dt=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(l.a)(this,a),(e=t.call(this)).pathname="/storeMenu",e.init_permissions=e.init_permissions.bind(Object(h.a)(e)),e.buildpermissions=e.buildpermissions.bind(Object(h.a)(e)),e.update_permissions=e.update_permissions.bind(Object(h.a)(e)),e.flag=!0,e.state={manageProduct:!0,storeDiscounts:!0,storePolicy:!0,appointOwner:!0,appointManager:!0,managerPermissions:!0,deleteManager:!0},e}return Object(i.a)(a,[{key:"onClick",value:function(e){v(this.props.history,e,this.pathname,this.props.location.state)}},{key:"init_permissions",value:function(){var e=this.props.location.state.id;this.flag&&(this.flag=!1,C("/home/permissions/"+this.props.location.state.storeName+"?id="+e,"GET","",this.buildpermissions))}},{key:"buildpermissions",value:function(e){if(null==e)alert("Server Failed");else{var t=""+e.reason;"Success"===t?this.update_permissions(e.value):"Dont_Have_Permission"===t?(alert("Dont Have Permission for that store. Soryy."),v(this.props.history,"/storeManagement",this.pathname,this.props.location.state)):(alert(t+", Cant get your permissions "),v(this.props.history,"/storeManagement",this.pathname,this.props.location.state))}}},{key:"update_permissions",value:function(e){this.setState({manageProduct:e.includes("OWNER")||e.includes("PRODUCTS_INVENTORY"),storeDiscounts:e.includes("OWNER")||e.includes("CRUD_POLICY_DISCOUNT"),storePolicy:e.includes("OWNER")||e.includes("CRUD_POLICY_DISCOUNT"),appointOwner:e.includes("OWNER")||e.includes("ADD_OWNER"),appointManager:e.includes("OWNER")||e.includes("ADD_MANAGER"),managerPermissions:e.includes("OWNER")||e.includes("ADD_MANAGER"),deleteManager:e.includes("OWNER")||e.includes("DELETE_MANAGER"),approveOwner:e.includes("OWNER")})}},{key:"render_permissions",value:function(){var e=this;return r.a.createElement("table",{style:ht},this.state.manageProduct?r.a.createElement(ce,{onClick:function(){return e.onClick("/manageProducts")}},r.a.createElement("p",{style:mt}," Add Product ")):"",this.state.manageProduct?r.a.createElement(ce,{onClick:function(){return e.onClick("/editProduct")}},r.a.createElement("p",{style:mt}," Edit Product ")):"",this.state.manageProduct?r.a.createElement(ce,{onClick:function(){return e.onClick("/productsDelete")}},r.a.createElement("p",{style:mt}," View & Delete Product ")," "):"",this.state.storeDiscounts?r.a.createElement(ce,{onClick:function(){return e.onClick("/manageDiscount")}},r.a.createElement("p",{style:mt},"Add Discounts")," "):"",this.state.storeDiscounts?r.a.createElement(ce,{onClick:function(){return e.onClick("/viewDiscounts")}},r.a.createElement("p",{style:mt},"View & Delete Discounts")," "):"",this.state.storePolicy?r.a.createElement(ce,{onClick:function(){return e.onClick("/policy")}},r.a.createElement("p",{style:mt}," Store Policy")," "):"",this.state.appointOwner?r.a.createElement(ce,{onClick:function(){return e.onClick("/addOwnerToStore")}},r.a.createElement("p",{style:mt},"Appoint Owner")," "):"",this.state.approveOwner?r.a.createElement(ce,{onClick:function(){return e.onClick("/approveOwnerToStore")}},r.a.createElement("p",{style:mt},"Approved Owner ")," "):"",this.state.appointManager?r.a.createElement(ce,{onClick:function(){return e.onClick("/addManagerToStore")}},r.a.createElement("p",{style:mt},"Appoint Manager")," "):"",this.state.managerPermissions?r.a.createElement(ce,{onClick:function(){return e.onClick("/editManagerPermissions")}},r.a.createElement("p",{style:mt},"Manager Permissions")," "):"",this.state.deleteManager?r.a.createElement(ce,{onClick:function(){return e.onClick("/removeManagerFromStore")}},r.a.createElement("p",{style:mt},"Delete Manager")," "):"",r.a.createElement(ce,{onClick:function(){return e.onClick("/viewAndReplyRequests")}},r.a.createElement("p",{style:mt},"View And Reply Requests")," "),r.a.createElement(ce,{onClick:function(){return e.onClick("/storeOwnerWatchHistory")}},r.a.createElement("p",{style:mt},"Owner Watch Purchase History")," "))}},{key:"render",value:function(){return this.init_permissions(),r.a.createElement(m,null,r.a.createElement(oe,{state:this.props.location.state}),r.a.createElement(D,{title:"Welcome to - "+this.props.location.state.storeName}),r.a.createElement(D,{title:"What do you want to do in your store?"}),r.a.createElement("div",{style:{paddingLeft:"25%",width:"50%"}},this.render_permissions()))}}]),a}(n.Component),ht={width:"99%",textAlign:"center",border:"2px solid black"},mt={textAlign:"center",fontSize:19,margin:0,padding:0,borderBottom:"1px solid black"},pt=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(l.a)(this,a),(e=t.call(this)).handleChangeName=e.handleChangeName.bind(Object(h.a)(e)),e.handleSubmit=e.handleSubmit.bind(Object(h.a)(e)),e.promiseAppointOwner=e.promiseAppointOwner.bind(Object(h.a)(e)),e.onBack=e.onBack.bind(Object(h.a)(e)),e.pathname="/addOwnerToStore",e.url="/managers/owner?id=",e.state={name:""},e}return Object(i.a)(a,[{key:"handleChangeName",value:function(e){this.setState({name:e.target.value})}},{key:"handleSubmit",value:function(e){var t=this.props.location.state.id,a={storeName:this.props.location.state.storeName,userName:this.state.name};C(this.url+t,"POST",a,this.promiseAppointOwner)}},{key:"promiseAppointOwner",value:function(e){if(null==e)alert("Server Crashed");else{var t=""+e.reason;if("Success"===t&&e.value){var a="";a+="The user : "+this.state.name+" added successfully\n",a+="In Store : "+this.props.location.state.storeName,alert(a)}else if("User_Not_Found"===t){"User Not Found",alert("User Not Found")}else"Already_Exists"===t?alert("user has alredy owner agreement"):"Already_Owner"===t?alert("user already owner"):(console.log(e),alert("Cant Appoint ".concat(this.getPermission(),"!\n Please try again.")))}}},{key:"onBack",value:function(){v(this.props.history,this.props.location.fromPath,this.pathname,this.props.location.state)}},{key:"render",value:function(){return r.a.createElement(m,null,r.a.createElement(oe,{state:this.props.location.state}),r.a.createElement(D,{title:"Add Manager To Store - "+this.props.location.state.storeName}),r.a.createElement("h4",{style:yt},"Enter the name of the user you want to add, then press submit"),r.a.createElement(ge,{title:"User Name:",type:"text",value:this.state.name,onChange:this.handleChangeName}),r.a.createElement(x,{text:"Submit",onClick:this.handleSubmit}),r.a.createElement(x,{text:"Back",onClick:this.onBack}))}},{key:"getPermission",value:function(){return"Owner"}}]),a}(n.Component),yt={textAlign:"center",color:"black",backgroundColor:"#F3F3F3",padding:"10px",fontFamily:"Arial",width:"99%",marginTop:0},vt=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(l.a)(this,a),(e=t.call(this)).pathname="/addManagerToStore",e.url="/managers/manager?id=",e.state={name:""},e}return Object(i.a)(a,[{key:"getPermission",value:function(){return"Manager"}}]),a}(pt),gt=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(l.a)(this,a),(e=t.call(this)).renderWaitingOwners=e.renderWaitingOwners.bind(Object(h.a)(e)),e.sendApproved=e.sendApproved.bind(Object(h.a)(e)),e.promiseApproved=e.promiseApproved.bind(Object(h.a)(e)),e.getOwners=e.getOwners.bind(Object(h.a)(e)),e.onBack=e.onBack.bind(Object(h.a)(e)),e.pathname="/approveOwnerToStore",e.url="/managers/approve/owner?id=",e.state={owners:void 0},e}return Object(i.a)(a,[{key:"onBack",value:function(){v(this.props.history,this.props.location.fromPath,this.pathname,this.props.location.state)}},{key:"getOwners",value:function(){var e=this,t=this.props.location.state.id,a=this.props.location.state.storeName;C("/managers/approve/list?id="+t,"POST",a,(function(t){if(null==t)alert("Server Crashed");else{var a=""+t.reason;"Store_Not_Found"===a?(alert("Store Not Found"),v(e.props.history,"/storeManagement",e.pathname,e.props.location.state)):"Success"===a?e.setState({owners:t.value}):alert("Error Opcode "+a)}}))}},{key:"promiseApproved",value:function(e){if(null==e)alert("Server Crashed");else{var t=""+e.reason;"User_Not_Found"===t?(alert("User Not Found"),this.getOwners()):"Store_Not_Found"===t?(alert("Store Not Found"),v(this.props.history,"/storeManagement",this.pathname,this.props.location.state)):"Dont_Have_Permission"===t?(alert("User dont have premeissions."),v(this.props.history,"/storeManagement",this.pathname,this.props.location.state)):"Success"===t?(alert("Aggremment Approved"),this.getOwners()):alert("Error Opcode "+t)}}},{key:"sendApproved",value:function(e){var t=this.props.location.state.id,a=this.props.location.state.storeName;C("/managers/approve/owner?id="+t+"&store="+a+"&user="+e,"POST","",this.promiseApproved)}},{key:"renderWaitingOwners",value:function(){var e=this,t=[],a=this.state.owners;return void 0===a||0===a.length?r.a.createElement("p",{style:{textAlign:"center"}}," No Waiting Approvels "):(a.forEach((function(a){t.push(r.a.createElement("div",{style:{float:"left",border:"1px solid black",marginLeft:"30%",width:"40%"},onMouseOver:function(e){e.currentTarget.style.backgroundColor="#92BAFF"},onMouseLeave:function(e){e.currentTarget.style.backgroundColor=""}},r.a.createElement("div",{style:{float:"left",width:"60%"},onMouseOver:function(){},onMouseLeave:function(){}},r.a.createElement("p",{style:{textAlign:"center"}}," User Name: ",a)),r.a.createElement("div",{style:{float:"left",width:"40%"},onMouseOver:function(){},onMouseLeave:function(){}},r.a.createElement(x,{text:"Appointment",onClick:function(t){e.sendApproved(a)}}))))})),t)}},{key:"render",value:function(){return void 0===this.state.owners&&this.getOwners(),r.a.createElement(m,null,r.a.createElement(oe,{state:this.props.location.state}),r.a.createElement(D,{title:"Approve Owners - "+this.props.location.state.storeName}),this.renderWaitingOwners(),r.a.createElement("div",{style:{float:"left",width:"100%"}},r.a.createElement(x,{text:"Back",onClick:this.onBack})))}}]),a}(n.Component),ft=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this)).handleChangeName=n.handleChangeName.bind(Object(h.a)(n)),n.handleChangeAge=n.handleChangeAge.bind(Object(h.a)(n)),n.handleChangeAddress=n.handleChangeAddress.bind(Object(h.a)(n)),n.handleChangeCountry=n.handleChangeCountry.bind(Object(h.a)(n)),n.handleChangeCreditCard=n.handleChangeCreditCard.bind(Object(h.a)(n)),n.handleChangeCvv=n.handleChangeCvv.bind(Object(h.a)(n)),n.handleChangeID=n.handleChangeID.bind(Object(h.a)(n)),n.handleChangeZip=n.handleChangeZip.bind(Object(h.a)(n)),n.handleChangeCity=n.handleChangeCity.bind(Object(h.a)(n)),n.handlebuy=n.handlebuy.bind(Object(h.a)(n)),n.buildbuy=n.buildbuy.bind(Object(h.a)(n)),n.render_name=n.render_name.bind(Object(h.a)(n)),n.cart=Et,n.pathname="/buyCart",n.state={name:"",address:"",country:"",creditCard:"",age:"",cvv:"",id:"",zip:"",city:""},n}return Object(i.a)(a,[{key:"handleChangeName",value:function(e){this.setState({name:e.target.value})}},{key:"handleChangeAge",value:function(e){this.setState({age:e.target.value})}},{key:"handleChangeAddress",value:function(e){this.setState({address:e.target.value})}},{key:"handleChangeCountry",value:function(e){this.setState({country:e.target.value})}},{key:"handleChangeCreditCard",value:function(e){this.setState({creditCard:e.target.value})}},{key:"handleChangeCvv",value:function(e){this.setState({cvv:e.target.value})}},{key:"handleChangeID",value:function(e){this.setState({id:e.target.value})}},{key:"handleChangeZip",value:function(e){this.setState({zip:e.target.value})}},{key:"handleChangeCity",value:function(e){this.setState({city:e.target.value})}},{key:"handlebuy",value:function(){if(3!==this.state.cvv.length)alert("wrong cvv, must be length 3");else if(this.state.cvv<100|this.state.cvv>999)alert("wrong cvv, must be bewtween 100-999");else if(this.state.id>999999999)alert("wrong id, must be smaller");else{var e={name:this.state.name,address:this.state.address,age:this.state.age,creditCard:this.state.creditCard,totalPrice:0,country:this.state.country,city:this.state.city,id:this.state.id,zip:this.state.zip,cvv:this.state.cvv};C("/home/buy?id="+this.props.location.state.id,"POST",e,this.buildbuy)}}},{key:"buildbuy",value:function(e){if(null==e)alert("Server Failed");else{var t=""+e.reason;"Success"==t?(alert("buy succefully"),void 0===this.props.location.state.name?v(this.props.history,"/",this.pathname,this.props.location.state):v(this.props.history,"/subscribe",this.pathname,this.props.location.state)):"Wrong_Address"==t?alert("error: please fill your adress properly. Sorry."):"Wrong_Card"==t?alert("error: please fill your credit cart number properly. Sorry."):"Wrong_Id"==t?alert("error: please fill your id properly. Sorry."):"Wrong_CVV"==t?alert("error: please fill your credit cart CVV properly. Sorry."):"Wrong_City"==t?alert("error: please fill your city name properly. Sorry."):"Wrong_Zip"==t?alert("error: please fill your zip number properly. Sorry."):"Invalid_Payment_Data"==t?alert("error: please fill your name and adress properly. Sorry."):"Invalid_Delivery_Data"==t?alert("error: please fill your country and adress properly. Sorry."):"Fail_Buy_Cart"==t?alert("error: not enougth amout in the store. Sorry."):"Not_Stands_In_Policy"==t?alert("error: please view the store policy to buy properly. Sorry."):"Payment_Reject"==t?alert("payment regected: please speak with your credit card company. Sorry."):"Supply_Reject"==t?alert("supply regected: please check with doar israel. Sorry."):"Basket_Policy_Failed"==t?alert("The amount of products you try to buy is greater than the store policy allowed."):"Products_Policy_Failed"==t?alert("The amount of one the products you try to buy is greater than the store policy allowed."):"Age_Policy_Failed"==t?alert("Your age is too low."):"Country_Policy_Failed"==t?alert("You cant buy from this country."):alert(t+", Unexpected error. Can't buy.")}}},{key:"render_name",value:function(){var e=this.props.location.state.name;return void 0!=e?(this.state.name=e,r.a.createElement("p",{style:{textAlign:"center"}}," name: ",e," ")):r.a.createElement(ge,{title:"name",type:"text",value:this.state.name,onChange:this.handleChangeName})}},{key:"render",value:function(){var e=this;return r.a.createElement(m,null,r.a.createElement(oe,{state:this.props.location.state}),r.a.createElement("body",null,r.a.createElement(D,{title:"Buy Cart"}),r.a.createElement("h3",{style:bt}," Enter your details:"),this.render_name(),r.a.createElement(ge,{title:"age",type:"number",min:1,value:this.state.age,onChange:this.handleChangeAge}),r.a.createElement(ge,{title:"address",type:"text",value:this.state.address,onChange:this.handleChangeAddress}),r.a.createElement(ge,{title:"city",type:"text",value:this.state.city,onChange:this.handleChangeCity}),r.a.createElement(ge,{title:"zip",type:"number",min:1,value:this.state.zip,onChange:this.handleChangeZip}),r.a.createElement(ge,{title:"country",type:"text",value:this.state.country,onChange:this.handleChangeCountry}),r.a.createElement(ge,{title:"creditCard",type:"text",value:this.state.creditCard,onChange:this.handleChangeCreditCard}),r.a.createElement(ge,{title:"cvv",type:"number",value:this.state.cvv,onChange:this.handleChangeCvv}),r.a.createElement(ge,{title:"id",type:"number",min:1,value:this.state.id,onChange:this.handleChangeID}),r.a.createElement(x,{text:"buy",onClick:this.handlebuy}),r.a.createElement(x,{text:"cancel",onClick:function(){v(e.props.history,e.props.location.fromPath,e.pathname,e.props.location.state)}})))}}]),a}(n.Component),Et={price:30,products:[{productName:"peanuts",store:"hanut",category:"category",amount:3,price:4.5,purchaseType:"immediate"},{productName:"peanuts2",store:"hanut aheret",category:"category",amount:90,price:6.89,purchaseType:"immediate"}]},bt={textAlign:"center",color:"black",backgroundColor:"#F3F3F3",padding:"10px",fontFamily:"Arial",width:"99%",marginTop:0},Ct=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).handleManager=n.handleManager.bind(Object(h.a)(n)),n.handleCancel=n.handleCancel.bind(Object(h.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(h.a)(n)),n.handleCheckboxChange=n.handleCheckboxChange.bind(Object(h.a)(n)),n.getManagersAppointedByMe=n.getManagersAppointedByMe.bind(Object(h.a)(n)),n.getManagersPromise=n.getManagersPromise.bind(Object(h.a)(n)),n.addOrRemovePermissionsPromise=n.addOrRemovePermissionsPromise.bind(Object(h.a)(n)),n.pathname="/editManagerPermissions",n.state={managers:[],showManagers:!1,manager:"",permissions:[],removePermission:!1},n.getManagersAppointedByMe(),n}return Object(i.a)(a,[{key:"getManagersAppointedByMe",value:function(){var e=this.props.location.state.id,t=this.props.location.state.storeName;C("/home/managers/"+t+"?id="+e,"GET","",this.getManagersPromise)}},{key:"getManagersPromise",value:function(e){if(null==e)alert("Server Failed");else if(console.log(e),"Success"===""+e.reason){var t=e.value,a=[];t.forEach((function(e){a.push({name:e})})),this.setState({managers:a})}}},{key:"handleManager",value:function(e,t){this.setState({name:e.target.value,showManagers:!0,manager:t})}},{key:"handleSubmit",value:function(){var e=this.props.location.state.id,t=this.props.location.state.storeName,a={userName:this.state.manager,storeName:t,permissions:this.state.permissions},n=this.state.removePermission?"/managers/permissions/delete":"/managers/permissions";console.log("in submit"),C(n+"?id="+e,"POST",a,this.addOrRemovePermissionsPromise)}},{key:"addOrRemovePermissionsPromise",value:function(e){if(console.log("here"),null==e)alert("Server Failed");else{console.log(e);var t=""+e.reason;"Success"===t?e.value&&(this.state.removePermission?alert("Remove Permissions successfully!"):alert("Added Permissions successfully!")):"Not_Found"===t?alert("Permissions Not Found to Remove"):"Invalid_Permissions"===t?alert("Inserted Invalid Permissions"):"Dont_Have_Permission"===t?alert("You don't have permission to add these permissions"):"Already_Exists"===t?alert("User already have all these permissions"):("User_Not_Found"===t||"Store_Not_Found"===t)&&alert("User Not Found")}this.setState({showManagers:!1,permissions:[],removePermission:!1})}},{key:"handleCancel",value:function(e){e.preventDefault(),this.setState({showManagers:!1,permissions:[],removePermission:!1})}},{key:"handleCheckboxChange",value:function(e,t){var a=e.target.checked,n=this.state.permissions.filter((function(e){return e!==t}));a&&(n.push(t),console.log(n)),this.setState({permissions:n})}},{key:"render_managers_table",value:function(){var e=this,t=this.state.managers,a=[];return t.forEach((function(t){return a.push(r.a.createElement(ce,{onClick:function(a){return e.handleManager(a,t.name)}},r.a.createElement("th",null,t.name)))})),a}},{key:"render_manager",value:function(){return r.a.createElement("table",{style:St},r.a.createElement("tr",null,r.a.createElement("th",{style:kt}," store managers: ")),this.render_managers_table())}},{key:"render_Permissions",value:function(){var e=this;return r.a.createElement("body",null,r.a.createElement("table",{style:St},r.a.createElement("tr",null,r.a.createElement("h2",null," add/remove permissions to ",this.state.manager,": ")),r.a.createElement("tr",null,r.a.createElement("label",null,r.a.createElement(Pt,{onChange:function(t){e.setState({removePermission:t.target.checked})}}),r.a.createElement("span",null,"Check in order to remove permission")))),r.a.createElement("div",null,r.a.createElement("table",{style:St},r.a.createElement("tr",null,r.a.createElement("th",null,r.a.createElement("label",null,r.a.createElement(Pt,{onChange:function(t){return e.handleCheckboxChange(t,"PRODUCTS_INVENTORY")}}),r.a.createElement("span",null,"Inventory management"))),r.a.createElement("th",null,r.a.createElement("label",null,r.a.createElement(Pt,{onChange:function(t){return e.handleCheckboxChange(t,"ADD_MANAGER")}}),r.a.createElement("span",null,"Add/Delete manager"))),r.a.createElement("th",null,r.a.createElement("label",null,r.a.createElement(Pt,{onChange:function(t){return e.handleCheckboxChange(t,"ADD_OWNER")}}),r.a.createElement("span",null,"Add/Delete owner"))),r.a.createElement("th",null,r.a.createElement("label",null,r.a.createElement(Pt,{onChange:function(t){return e.handleCheckboxChange(t,"CRUD_POLICY_DISCOUNT")}}),r.a.createElement("span",null,"Policy management")))))))}},{key:"render",value:function(){var e=this;return r.a.createElement(m,null,r.a.createElement(oe,{state:this.props.location.state}),r.a.createElement("div",null,r.a.createElement(D,{title:"Edit permissions to manager from store:"}),!1===this.state.showManagers?this.render_manager():"",!1===this.state.showManagers?r.a.createElement(x,{text:"Back",onClick:function(){v(e.props.history,e.props.location.fromPath,e.pathname,e.props.location.state)}}):"",!0===this.state.showManagers?this.render_Permissions():"",!0===this.state.showManagers?r.a.createElement(x,{text:"Add",onClick:this.handleSubmit}):"",!0===this.state.showManagers?r.a.createElement(x,{text:"Back",onClick:this.handleCancel}):""))}}]),a}(n.Component),St={width:"99%",textAlign:"center",border:"2px solid black"},kt={borderBottom:"2px solid black"},Pt=function(e){return r.a.createElement("input",Object.assign({type:"checkbox"},e))},At=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).handleRequests=n.handleRequests.bind(Object(h.a)(n)),n.handleChangeComment=n.handleChangeComment.bind(Object(h.a)(n)),n.getRequestsPromise=n.getRequestsPromise.bind(Object(h.a)(n)),n.getRequestById=n.getRequestById.bind(Object(h.a)(n)),n.getRequestOfStore=n.getRequestOfStore.bind(Object(h.a)(n)),n.renderRequestTable=n.renderRequestTable.bind(Object(h.a)(n)),n.renderRequests=n.renderRequests.bind(Object(h.a)(n)),n.handleSend=n.handleSend.bind(Object(h.a)(n)),n.pathname="/viewAndReplyRequests",n.state={requests:"",enableResponse:!1,requestId:"",comment:""},n.getRequestOfStore(),n}return Object(i.a)(a,[{key:"getRequestOfStore",value:function(){var e=this.props.location.state.id,t=this.props.location.state.storeName;C("/managers/request/"+t+"?id="+e,"GET","",this.getRequestsPromise)}},{key:"getRequestsPromise",value:function(e){null==e?alert("Server Failed"):"Success"===""+e.reason&&this.setState({requests:e.value})}},{key:"renderRequestTable",value:function(){var e=this,t=this.state.requests,a=[];return t&&t.forEach((function(t){return a.push(r.a.createElement(ce,{onClick:function(a){return e.handleRequests(a,t.id)}},r.a.createElement("th",null,t.id),r.a.createElement("th",null,t.senderName),r.a.createElement("th",null,t.content)))})),a}},{key:"renderRequests",value:function(){return r.a.createElement("table",{style:_t},r.a.createElement("tr",null,r.a.createElement("th",{style:xt}," ID "),r.a.createElement("th",{style:xt}," Sender "),r.a.createElement("th",{style:xt}," Content ")),this.renderRequestTable())}},{key:"handleRequests",value:function(e,t){this.setState({name:e.target.value,enableResponse:!0,requestId:t})}},{key:"handleChangeComment",value:function(e){this.setState({comment:e.target.value})}},{key:"handleSend",value:function(e){var t=this,a=this.state.requestId;if(""===this.state.comment&&alert("Cannot send an empty comment!"),null!==this.getRequestById(a).comment)alert("Already sent a comment!");else{var n=this.props.location.state.id,r=this.props.location.state.storeName,s={requestId:a,content:this.state.comment};C("/managers/response/"+r+"?id="+n,"POST",s,(function(e){if(null==e)alert("Server Crashed");else{var n=""+e.reason;if("Success"===n)e.value.comment===t.state.comment?alert("Send response to request ".concat(a," Successfully!")):alert("Cannot send response to request ".concat(a,"!"));else"InvalidRequest"==n?alert("invalid comment: please, send non empty cooment "):"Dont_Have_Permission"==n?(alert("you don't have permission for that action"),v(t.props.history,"/storeManagement","",t.props.location.state)):alert("store not found, wrong details")}}))}}},{key:"getRequestById",value:function(e){return this.state.requests.filter((function(t){return t.id===e}))[0]}},{key:"renderResponse",value:function(){return r.a.createElement("div",null,r.a.createElement(Le,{title:"Response to request with id "+this.state.requestId+":",rows:4,cols:50,value:this.state.comment,onChange:this.handleChangeComment}),r.a.createElement(x,{text:"send",onClick:this.handleSend}))}},{key:"render",value:function(){var e=this;return r.a.createElement(m,null,r.a.createElement(oe,{state:this.props.location.state}),r.a.createElement(D,{title:"Watch And Replay On Requests"}),r.a.createElement("div",null,r.a.createElement("h4",{style:Ot},"Requests in store: ",this.props.location.state.storeName),r.a.createElement("div",null,this.renderRequests()),this.state.enableResponse?this.renderResponse():"",r.a.createElement(x,{text:"Back",onClick:function(){v(e.props.history,e.props.location.fromPath,e.pathname,e.props.location.state)}})))}}]),a}(n.Component),Ot={textAlign:"center",color:"black",backgroundColor:"#F3F3F3",padding:"10px",fontFamily:"Arial",width:"99%",marginTop:0},_t={width:"99%",textAlign:"center",border:"2px solid black"},xt={borderBottom:"2px solid black"},Dt=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(l.a)(this,a),(e=t.call(this)).handleChangeStoreName=e.handleChangeStoreName.bind(Object(h.a)(e)),e.handleChangeUserName=e.handleChangeUserName.bind(Object(h.a)(e)),e.create_Purchases_stores=e.create_Purchases_stores.bind(Object(h.a)(e)),e.buildPurchases=e.buildPurchases.bind(Object(h.a)(e)),e.renderPurchas=e.renderPurchase.bind(Object(h.a)(e)),e.create_Purchases_user=e.create_Purchases_user.bind(Object(h.a)(e)),e.render_optinos=e.render_optinos.bind(Object(h.a)(e)),e.create_list=e.create_list.bind(Object(h.a)(e)),e.buildStores=e.buildStores.bind(Object(h.a)(e)),e.buildUsers=e.buildUsers.bind(Object(h.a)(e)),e.switch_state=e.switch_state.bind(Object(h.a)(e)),e.flag=!0,e.state={user:"",store:"",purchases:[],showStores:!0,values:[]},e}return Object(i.a)(a,[{key:"create_Purchases_stores",value:function(){this.flag=!1;var e=this.props.location.state.id;C("/admin/storehistory/"+this.state.store+"?id="+e,"GET","",this.buildPurchases)}},{key:"create_Purchases_user",value:function(){var e=this.props.location.state.id;C("/admin/userhistory/"+this.state.user+"?id="+e,"GET","",this.buildPurchases)}},{key:"buildPurchases",value:function(e){if(null==e)alert("Server Failed");else{var t=""+e.reason;"Success"==t?this.setState({purchases:e.value}):"Store_Not_Found"==t?alert("the store does'nt exist"):"Dont_Have_Permission"==t?alert("you don't have permission to watch the store history"):alert(t+", Can't present your store purchases")}}},{key:"renderPurchase",value:function(){var e=this,t=[];return this.state.purchases.forEach((function(a){var n=a.date.indexOf("T");t.push(r.a.createElement("table",{style:wt},r.a.createElement("tr",null,"purchase "+e.counter+++":",r.a.createElement("th",null,"buyer:"+a.buyer),r.a.createElement("th",null,"store:"+a.storeName),r.a.createElement("th",null,"total price:"+a.price),r.a.createElement("th",null,"date:"+a.date.substring(0,n)),r.a.createElement("th",null,"hour:"+a.date.substring(n+1))),e.renderProduct(a.product)))})),this.counter=1,t}},{key:"renderProduct",value:function(e){var t=[];return e.forEach((function(e){t.push(r.a.createElement("tr",null,r.a.createElement("th",null,"product name:"+e.productName),r.a.createElement("th",null,"category:"+e.category),r.a.createElement("th",null,"amount:"+e.amount),r.a.createElement("th",null,"purchase type:"+e.purchaseType)))})),t}},{key:"create_list",value:function(){if(this.flag)if(this.flag=!1,this.state.showStores)C("/store","GET","",this.buildStores);else{var e=this.props.location.state.id;C("/admin/allusers/"+this.state.user+"?id="+e,"GET","",this.buildUsers)}}},{key:"buildStores",value:function(e){if(null==e)alert("Server Failed");else{var t=""+e.reason;if("Success"==t){var a=[];e.value.forEach((function(e){a.push(e.name)})),this.setState({values:a})}else alert(t+", Can't present purchases"),this.setState({values:[]})}}},{key:"buildUsers",value:function(e){if(null==e)alert("Server Failed");else{var t=""+e.reason;"Success"==t?this.setState({values:e.value}):"NOT_ADMIN"==t?(alert("you are not admin"),this.setState({values:[]})):(alert(t+", Can't present purchases"),this.setState({values:[]}))}}},{key:"handleChangeStoreName",value:function(e){this.setState({store:e.target.value})}},{key:"handleChangeUserName",value:function(e){this.setState({user:e.target.value})}},{key:"render_stores",value:function(){return r.a.createElement(m,null,r.a.createElement(D,{title:"Watch store history:"}),r.a.createElement("div",{style:jt},r.a.createElement("label",{style:{textAlign:"center"}},"Store name: ")),r.a.createElement("div",{style:jt},r.a.createElement("select",{onChange:this.handleChangeStoreName},r.a.createElement("option",{value:""},"-------------------"),this.render_optinos())),r.a.createElement(x,{text:"show history of the store",onClick:this.create_Purchases_stores}))}},{key:"render_optinos",value:function(){var e=[];return this.state.values.forEach((function(t){e.push(r.a.createElement("option",{value:t},t))})),e}},{key:"render_users",value:function(){return r.a.createElement(m,null,r.a.createElement(D,{title:"Watch user history:"}),r.a.createElement("div",{style:jt},r.a.createElement("label",{style:{textAlign:"center"}},"User name: ")),r.a.createElement("div",{style:jt},r.a.createElement("select",{onChange:this.handleChangeUserName},r.a.createElement("option",{value:""},"-------------------"),this.render_optinos())),r.a.createElement(x,{text:"show history of the user",onClick:this.create_Purchases_user}))}},{key:"switch_state",value:function(){this.setState({showStores:!this.state.showStores,purchases:[],user:"",store:"",values:[]}),this.flag=!0}},{key:"render",value:function(){return this.create_list(),r.a.createElement(m,null,r.a.createElement(oe,{state:this.props.location.state}),r.a.createElement("body",null,!0===this.state.showStores?this.render_stores():this.render_users(),r.a.createElement(x,{text:"switch",onClick:this.switch_state})),this.renderPurchase())}}]),a}(n.Component),wt={color:"black",padding:"1px",margin:"10px",lineHeight:5,fontFamily:"Arial",width:"80%"},jt={display:"flex",justifyContent:"center",alignItems:"center"},Tt=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).pathname="/subscribe",n.state={id:-1,error:"",stores:[],flag:!1},n.buildStores=n.buildStores.bind(Object(h.a)(n)),n}return Object(i.a)(a,[{key:"buildStores",value:function(e){if(null==e)alert("Server Failed");else{var t=""+e.reason;"Success"==t?this.setState({stores:e.value,flag:!0}):alert(t+", Cant Add Product to Store")}}},{key:"create_stores",value:function(){!1===this.state.flag&&C("/store","GET","",this.buildStores)}},{key:"renderStore",value:function(e){return r.a.createElement("div",{style:{float:"left",width:"30%",border:"1px solid black",textAlign:"center",margin:"1%"}},r.a.createElement("div",{style:{float:"left",width:"100%",background:"#3086DB"}},r.a.createElement("p",null," ",e.name," ")),r.a.createElement("div",{style:{float:"left",width:"100%"}},r.a.createElement("p",null," ",e.description," ")),r.a.createElement("div",{style:{float:"left",width:"100%"}},r.a.createElement("img",{src:me.a})))}},{key:"render_stores_table",value:function(){var e=this,t=[];return this.state.stores.forEach((function(a){return t.push(e.renderStore(a))})),t}},{key:"render_stores",value:function(){return this.render_stores_table()}},{key:"render",value:function(){return this.create_stores(),r.a.createElement(m,null,r.a.createElement(ne,{state:this.props.location.state}),r.a.createElement("body",null,r.a.createElement(D,{title:"Welcome user "+this.props.location.state.name}),r.a.createElement("div",null,r.a.createElement("h3",{style:{textAlign:"center"}}," Stores "),0===this.state.stores.length?r.a.createElement("h3",{style:{textAlign:"center"}}," no stores on board"):this.render_stores())))}}]),a}(n.Component),Nt=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(l.a)(this,a),(e=t.call(this)).pathname="/editProduct",e.editClick=e.editClick.bind(Object(h.a)(e)),e.editProductPromise=e.editProductPromise.bind(Object(h.a)(e)),e.getProducts=e.getProducts.bind(Object(h.a)(e)),e.state={products:[],updated_products:!1,name:void 0,category:"",amount:1,price:1,purchase:"IMMEDDIATE"},e}return Object(i.a)(a,[{key:"getProducts",value:function(){var e=this;!1===this.state.updated_products&&C("/home/product?store="+this.props.location.state.storeName,"GET","",(function(t){if(null===t)alert("Server Failed");else{var a=""+t.reason;"Success"===a?e.setState({products:t.value,updated_products:!0}):"Store_Not_Found\u200f"===a?(alert("Store Not Found. Soryy."),v(e.props.history,"/storeManagement","",e.props.location.state)):(alert("Cant Access products"),v(e.props.history,"/storeManagement","",e.props.location.state))}}))}},{key:"editClick",value:function(){var e={};e.productName=this.state.name,e.storeName=this.props.location.state.storeName,e.category=this.state.category,e.amount=this.state.amount,e.price=this.state.price,e.purchaseType=this.state.purchase;var t=this.props.location.state.id;C("/home/product/edit?id="+t,"POST",e,this.editProductPromise)}},{key:"editProductPromise",value:function(e){if(null===e)alert("Server Failed");else{var t=""+e.reason;"Invalid_Product"===t?alert("The product data isnt valid. please insert again"):"Store_Not_Found\u200f"===t?(alert("Store doesn't Exits. Go back to main menu"),v(this.props.history,"/subscribe",this.pathname,this.props.location.state)):"Dont_Have_Permission\u200f"===t?(alert("User Doesnt have premission for that. By By"),v(this.props.history,"/storeManagement",this.pathname,this.props.location.state)):"Success"===t?(alert("Product Edit"),this.setState({name:void 0,category:"",amount:1,price:1,updated_products:!1})):alert(t+", Cant Add Product to Store")}}},{key:"renderSelectedProduct",value:function(){var e=this;return void 0===this.state.name?r.a.createElement("p",{style:{textAlign:"center"},Didnt:!0,selected:!0,a:!0,product:!0}):r.a.createElement("div",null,r.a.createElement("h2",{style:{textAlign:"center"}},this.state.name," "),r.a.createElement(ge,{type:"text",title:"Category:",value:this.state.category,onChange:function(t){e.setState({category:t.target.value})}}),r.a.createElement(ge,{type:"number",min:1,title:"Amount:",value:this.state.amount,onChange:function(t){e.setState({amount:t.target.value})}}),r.a.createElement(ge,{type:"number",min:1,title:"Price",value:this.state.price,onChange:function(t){e.setState({price:t.target.value})}}),r.a.createElement(ge,{type:"text",title:"Purchase Type:",value:this.state.purchase,onChange:function(){}}),r.a.createElement(x,{text:"Edit",onClick:this.editClick}))}},{key:"render_product_table",value:function(){var e=this,t=this.state.products,a=[];return t.forEach((function(t){return a.push(r.a.createElement(ce,{onClick:function(){return function(t){e.setState({name:t.productName,category:t.category,amount:t.amount,price:t.price,purchase:t.purchaseType})}(t)}},r.a.createElement("th",null," ",t.productName," "),r.a.createElement("th",null," ",t.category," "),r.a.createElement("th",null," ",t.amount," "),r.a.createElement("th",null," ",t.price," "),r.a.createElement("th",null," ",t.purchaseType," ")))})),a}},{key:"render_product",value:function(){return this.getProducts(),r.a.createElement("div",null,r.a.createElement("h3",null,this.state.store),r.a.createElement("table",{style:Ft},r.a.createElement("tr",null,r.a.createElement("th",{style:Mt}," Product Name "),r.a.createElement("th",{style:Mt}," Category "),r.a.createElement("th",{style:Mt}," Amount "),r.a.createElement("th",{style:Mt}," Price "),r.a.createElement("th",{style:Mt}," Purchase Type ")),this.render_product_table()))}},{key:"render",value:function(){return r.a.createElement(m,null,r.a.createElement(oe,{state:this.props.location.state}),r.a.createElement(D,{title:"Add Product To Store:"}),r.a.createElement("h2",{style:{textAlign:"center"}},this.props.location.state.storeName),this.render_product(),this.renderSelectedProduct())}}]),a}(n.Component),Ft={width:"99%",textAlign:"center",border:"2px solid black"},Mt={borderBottom:"2px solid black"},Bt=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(l.a)(this,a),(e=t.call(this)).pathname="/viewDiscounts",e.getMap=e.getMap.bind(Object(h.a)(e)),e.renderRowOfDiscounts=e.renderRowOfDiscounts.bind(Object(h.a)(e)),e.removeDiscount=e.removeDiscount.bind(Object(h.a)(e)),e.deleteCallBack=e.deleteCallBack.bind(Object(h.a)(e)),e.init_permissions=e.init_permissions.bind(Object(h.a)(e)),e.canDeletePromise=e.canDeletePromise.bind(Object(h.a)(e)),e.flag=!0,e.state={mapped:!1,map:{},canDelete:!1},e.elementInRow=3,e}return Object(i.a)(a,[{key:"init_permissions",value:function(){var e=this.props.location.state.id;this.flag&&(this.flag=!1,C("/home/permissions/"+this.props.location.state.storeName+"?id="+e,"GET","",this.canDeletePromise))}},{key:"canDeletePromise",value:function(e){if(null==e)alert("Server Failed");else if("Success"===""+e.reason){var t=e.value;this.setState({canDelete:t.includes("OWNER")||t.includes("CRUD_POLICY_DISCOUNT")})}else this.setState({canDelete:!1})}},{key:"getMap",value:function(){var e=this;if(0==this.state.mapped){C("/store/discount/get?store="+this.props.location.state.storeName,"GET","",(function(t){if(null==t)alert("Server Failed");else{var a=t.reason;console.log(t.value),"Store_Not_Found"==a?alert("Store Not Exites"):"Success"==a&&(e.setState({map:t.value,mapped:!0}),e.init_permissions())}}))}}},{key:"renderSelectedDiscountList",value:function(e,t){var a=this,n=[];switch(e.CLASSNAME){case"Domain.Discount.ProductTermDiscount":return n.push(this.renderDiscountByClass(e,t)),n;case"Domain.Discount.XorDiscount":case"Domain.Discount.OrDiscount":case"Domain.Discount.AndDiscount":return e.DATA.discounts.forEach((function(e){n.push(a.renderDiscountByClass(e,t))})),n;default:return e.forEach((function(e){n.push(a.renderDiscountByClass(e,t))})),n}}},{key:"renderComlicatedByClass",value:function(e){var t="";switch(e.CLASSNAME){case"Domain.Discount.AndDiscount":t="AND Discount";break;case"Domain.Discount.OrDiscount":t="OR Discount";break;case"Domain.Discount.XorDiscount":t="XOR Discount"}return r.a.createElement("div",{style:{border:"1px solid black",textAlign:"center",marginBottom:5,backgroundColor:"white"}},r.a.createElement("p",{style:{borderBottom:"1px solid black",backgroundColor:"#47CEFF",marginTop:0}}," ",t," "),r.a.createElement("div",{style:{padding:10}},this.renderSelectedDiscountList(e,!1)))}},{key:"renderTermByClass",value:function(e){var t=this,a="Simple Term";switch(e.CLASSNAME){case"Domain.Discount.Term.BaseTerm":return r.a.createElement(j,null,r.a.createElement("p",{style:{backgroundColor:"pink",marginTop:0}},a),r.a.createElement("p",{style:{textAlign:"center"}}," product: ",e.DATA.product," "),r.a.createElement("p",{style:{textAlign:"center"}}," amount: ",e.DATA.amount," "));case"Domain.Discount.Term.AndTerm":a="AND Term";break;case"Domain.Discount.Term.OrTerm":a="OR Term";break;case"Domain.Discount.Term.XorTerm":a="XOR Term"}return r.a.createElement(j,null,r.a.createElement("p",{style:{backgroundColor:"#E640B5",marginTop:0}},a),r.a.createElement("div",{style:{padding:3}},function(e){var a=[];return e.forEach((function(e){a.push(t.renderTermByClass(e))})),a}(e.DATA.terms)))}},{key:"renderDiscountByClass",value:function(e){switch(e.CLASSNAME){case"Domain.Discount.StoreDiscount":return r.a.createElement("div",null,r.a.createElement(j,{style:{margin:4}},r.a.createElement("p",{style:{backgroundColor:"#FFC242",height:30,marginTop:0}}," Store Discount"),r.a.createElement("p",{style:{margin:2}}," Amount: ",e.DATA.minAmount," "),r.a.createElement("p",{style:{margin:2}}," Precentage: ",e.DATA.percentage," % ")));case"Domain.Discount.AndDiscount":case"Domain.Discount.XorDiscount":case"Domain.Discount.OrDiscount":return r.a.createElement("div",{style:{padding:2}},this.renderComlicatedByClass(e));case"Domain.Discount.RegularDiscount":return r.a.createElement(j,null,r.a.createElement("p",{style:{backgroundColor:"lightgreen",marginTop:0}}," Simple Discount "),r.a.createElement("p",{style:{textAlign:"center"}},"Product: ",e.DATA.product," "),r.a.createElement("p",{style:{textAlign:"center"}},"Precentage: ",e.DATA.percantage," % "));case"Domain.Discount.ProductTermDiscount":var t=e.DATA.term,a=e.DATA.product,n=e.DATA.amount;return r.a.createElement(j,null,r.a.createElement("p",{style:{backgroundColor:"#CC84F0",textAlign:"center",marginTop:0}}," Term Discount "),r.a.createElement("p",{style:{textAlign:"center"}}," Product: ",a),r.a.createElement("p",{style:{textAlign:"center"}}," Amount: ",n),r.a.createElement("div",{style:{padding:4}},this.renderTermByClass(t)))}}},{key:"deleteCallBack",value:function(e){if(null==e)alert("Server Failed");else{var t=e.reason;"Store_Not_Found"==t?alert("Store Not Exites"):"Dont_Have_Permission"==t?alert("you don't have permmission to delete the disocunt"):"Not_Found"==t?alert("disount not exist"):"Success"==t&&(alert("discount was removed successfully"),this.setState({mapped:!1}),this.getMap())}}},{key:"removeDiscount",value:function(e){var t=this.props.location.state.id,a=this.props.location.state.storeName;C("/store/discount/delete?store="+a+"&id="+t,"POST",e,this.deleteCallBack)}},{key:"renderDiscount",value:function(e){var t=this,a=Object.getOwnPropertyNames(this.state.map),n=this.state.map[a[e]];if(void 0!==n){var s=n.toString(),o=JSON.parse(s);return r.a.createElement("div",null,this.renderDiscountByClass(o),this.state.canDelete?r.a.createElement(x,{text:"DELETE",onClick:function(){return t.removeDiscount(a[e])}}):"")}return r.a.createElement("div",null,r.a.createElement("p",null," ",n," "))}},{key:"renderRowOfDiscounts",value:function(e,t){for(var a=[],n=e+this.elementInRow,s=e;s<n&&s<t;s++)a.push(r.a.createElement("div",{style:{float:"left",width:98/this.elementInRow+"%"}},this.renderDiscount(s)));return a}},{key:"renderDiscountsMap",value:function(){this.getMap();var e=Object.getOwnPropertyNames(this.state.map);if(0===e.length)return r.a.createElement("p",{style:{textAlign:"center"}}," No disconts in store");for(var t=[],a=0;a<=(e.length+(this.elementInRow-1))/this.elementInRow;a++)t.push(r.a.createElement("div",null,this.renderRowOfDiscounts(a*this.elementInRow,e.length)));return t}},{key:"render",value:function(){var e=this,t=this.props.location.state.storeName;return r.a.createElement(m,null,r.a.createElement(oe,{state:this.props.location.state}),r.a.createElement(D,{title:"View Discounts "+t}),this.renderDiscountsMap(),r.a.createElement("div",{style:{float:"left",width:"100%"}},r.a.createElement(x,{text:"Back",onClick:function(){v(e.props.history,e.props.location.fromPath,e.pathname,e.props.location.state)}})))}}]),a}(n.Component),Rt="Domain.PurchasePolicy.SystemPurchasePolicy",Lt="Domain.PurchasePolicy.BasketPurchasePolicy",It="Domain.PurchasePolicy.UserPurchasePolicy",qt="Domain.PurchasePolicy.ProductPurchasePolicy",Wt="Domain.PurchasePolicy.ComposePolicys.AndPolicy",Ut="Domain.PurchasePolicy.ComposePolicys.OrPolicy",Gt="Domain.PurchasePolicy.ComposePolicys.XorPolicy",Vt=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(l.a)(this,a),(e=t.call(this)).pathname="/policy",e.list_selected=[],e.list_comlicated=[],e.list_county=[],e.map_prodcts={},e.flag=!1,e.state={age:1,maxAmount:0,minAmount:0,country:"",selected_policy:void 0,products:[],selected_product:void 0,selected_amount_max:0,selected_amount_min:0},e.updateClick=e.updateClick.bind(Object(h.a)(e)),e.renderProductPolicy=e.renderProductPolicy.bind(Object(h.a)(e)),e}return Object(i.a)(a,[{key:"renderSystemPurcahsePolicay",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("h3",{style:Xt}," Age Policy "),r.a.createElement(Yt,{title:"Minimum Age",type:"number",min:0,value:this.state.age,onChange:function(t){t.target.value<120&&e.setState({age:t.target.value})}}),r.a.createElement(x,{text:"Add",onClick:function(){var t={};t.CLASSNAME=Rt,t.DATA={age:e.state.age},e.list_selected.push(t),e.setState({age:1})}}))}},{key:"renderBasketPurcahsePolicy",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("h3",{style:Xt}," Store Policy "),r.a.createElement(Yt,{title:"Maximum Products In Store",type:"number",min:0,value:this.state.maxAmount,onChange:function(t){e.setState({maxAmount:t.target.value})}}),r.a.createElement(x,{text:"Add",onClick:function(){var t={};t.CLASSNAME=Lt,t.DATA={maxAmount:e.state.maxAmount},e.list_selected.push(t),e.setState({maxAmount:1})}}))}},{key:"renderColumn1",value:function(){return r.a.createElement("div",{style:{height:400}},r.a.createElement("div",{style:{height:"50%"}},this.renderSystemPurcahsePolicay()),r.a.createElement("div",{style:{height:"50%"}},this.renderBasketPurcahsePolicy()))}},{key:"renderByComlicated",value:function(e,t){var a=this,n="",s="";switch(e.CLASSNAME){case Wt:n="And Policy",s="#33FF9F";break;case Ut:n="Or Policy",s="#B2FF4D";break;case Gt:n="Xor Policy",s="#FFFA70"}var o=e.DATA.policyList,l=[];return o.forEach((function(e){l.push(r.a.createElement("div",null,a.renderByClass(e,!1)))})),r.a.createElement("div",{style:{border:"1px solid black"}},r.a.createElement("h4",{style:{backgroundColor:s,textAlign:"center",marginTop:0}}," ",n," "),r.a.createElement("div",{style:{padding:4}},l),t?r.a.createElement(Ht,{selectClick:function(){return function(e){a.list_selected.splice(a.list_selected.indexOf(e),1),a.setState({selected_policy:e})}(e)},comlicatedClick:function(){return function(e){a.list_selected.splice(a.list_selected.indexOf(e),1),a.list_comlicated.push(e),a.setState({})}(e)},deleteClick:function(){return function(e){a.list_selected.splice(a.list_selected.indexOf(e),1),a.setState({})}(e)}}):"")}},{key:"renderByClass",value:function(e,t){var a=this,n=e.DATA,s=function(e){a.list_selected.splice(a.list_selected.indexOf(e),1),a.setState({selected_policy:e})},o=function(e){a.list_selected.splice(a.list_selected.indexOf(e),1),a.list_comlicated.push(e),a.setState({})},l=function(e){a.list_selected.splice(a.list_selected.indexOf(e),1),a.setState({})};switch(e.CLASSNAME){case Rt:return r.a.createElement("div",{style:{border:"2px solid #5CCCC4",margin:4}},r.a.createElement("h4",{style:{backgroundColor:"#5CCCC4",textAlign:"center",marginTop:0}},"Age Policy"),r.a.createElement("p",{style:{textAlign:"center"}}," Age: ",n.age," "),t?r.a.createElement(Ht,{selectClick:function(){return s(e)},comlicatedClick:function(){return o(e)},deleteClick:function(){return l(e)}}):"");case Lt:return r.a.createElement("div",{style:{border:"2px solid #9AB0DB",margin:4}},r.a.createElement("h4",{style:{backgroundColor:"#9AB0DB",textAlign:"center",marginTop:0}},"Store Policy"),r.a.createElement("p",{style:{textAlign:"center"}}," Max Amount: ",n.maxAmount," "),t?r.a.createElement(Ht,{selectClick:function(){return s(e)},comlicatedClick:function(){return o(e)},deleteClick:function(){return l(e)}}):"");case Wt:case Ut:case Gt:return this.renderByComlicated(e,t);case It:var i=n.countries;return r.a.createElement("div",{style:{border:"2px solid #B352FF",margin:4}},r.a.createElement("h4",{style:{backgroundColor:"#B352FF",textAlign:"center",marginTop:0}},"Country Policy"),this.renderCountriesList(i),t?r.a.createElement(Ht,{selectClick:function(){return s(e)},comlicatedClick:function(){return o(e)},deleteClick:function(){return l(e)}}):"");case qt:var c=n.amountPerProduct,u=[];return Object.getOwnPropertyNames(c).forEach((function(e){var t=c[e],a=t.max,n=t.min;u.push(r.a.createElement("div",null,r.a.createElement("p",{style:{textAlign:"center"}}," Product: ",e," "),r.a.createElement("p",{style:{textAlign:"center"}}," Min Amount of product: ",n," "),r.a.createElement("p",{style:{textAlign:"center"}}," Max Amount of product: ",a," ")))})),r.a.createElement("div",{style:{border:"2px solid #B0C8FF",margin:4}},r.a.createElement("h4",{style:{backgroundColor:"#B0C8FF",textAlign:"center",marginTop:0}},"Product Policy"),u,t?r.a.createElement(Ht,{selectClick:function(){return s(e)},comlicatedClick:function(){return o(e)},deleteClick:function(){return l(e)}}):"")}}},{key:"renderList",value:function(e,t){var a=this,n=[];return e.forEach((function(e){n.push(a.renderByClass(e,t))})),r.a.createElement("div",{style:{padding:4}},n)}},{key:"renderComplex",value:function(){var e=this,t=function(t){e.list_comlicated=[],e.list_selected.push(t),e.setState({})};return r.a.createElement("div",{style:{float:"left",width:"100%"}},r.a.createElement("h3",{style:Xt}," Complex Policies "),this.renderList(this.list_comlicated,!1),r.a.createElement("div",{style:{float:"left",width:"33%"}},r.a.createElement(x,{text:"And",onClick:function(){if(1==e.list_comlicated.length)alert("Please Select more then 1 policy to create a complex one");else if(0==e.list_comlicated.length)alert("Please Select Policies");else{var a={};a.CLASSNAME=Wt,a.DATA={policyList:e.list_comlicated},t(a)}}})),r.a.createElement("div",{style:{float:"left",width:"33%"}},r.a.createElement(x,{text:"Or",onClick:function(){if(1==e.list_comlicated.length)alert("Please Select more then 1 policy to create a complex one");else if(0==e.list_comlicated.length)alert("Please Select Policies");else{var a={};a.CLASSNAME=Ut,a.DATA={policyList:e.list_comlicated},t(a)}}})),r.a.createElement("div",{style:{float:"left",width:"33%"}},r.a.createElement(x,{text:"Xor",onClick:function(){if(1==e.list_comlicated.length)alert("Please Select more then 1 policy to create a complex one");else if(0==e.list_comlicated.length)alert("Please Select Policies");else{var a={};a.CLASSNAME=Gt,a.DATA={policyList:e.list_comlicated},t(a)}}})))}},{key:"renderSelectedComplex",value:function(){return r.a.createElement("div",null,r.a.createElement("h3",{style:Xt}," Selected Policies "),this.renderList(this.list_selected,!0),this.renderComplex())}},{key:"updateClick",value:function(){var e=this,t=this.props.location.state.id,a=this.props.location.state.storeName,n=this.state.selected_policy;C("/store/policy/add?id="+t+"&store="+a,"POST",n,(function(t){if(null==t)alert("Server Failed");else{console.log(t);var a=""+t.reason;"Store_Not_Found\u200f"===a?(alert("Store Not Found. By By"),v(e.props.history,"/subscribe","",e.props.location.state)):"Invalid_Policy\u200f"===a?(alert("Invalid Policy, Please try agian later"),e.setState({selected_policy:void 0})):"Dont_Have_Permission\u200f"===a?(alert("User Dosnt have premission. By By"),v(e.props.history,"/subscribe","",e.props.location.state)):"Invalid_Product\u200f"===a?(alert("Invalid Policy, there is a product not valid, Please try agian later"),e.setState({selected_policy:void 0})):"Success"===a&&(alert("Policy added to Store"),e.setState({selected_policy:void 0}))}}))}},{key:"renderSelectedPolicy",value:function(){var e=this;if(void 0===this.state.selected_policy)return"";return r.a.createElement("div",{sstyle:{marginBottom:5}},r.a.createElement("div",{style:{float:"left",paddingLeft:500,width:"30%"}},this.renderByClass(this.state.selected_policy,!1),r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement(x,{text:"Update",onClick:this.updateClick}),r.a.createElement(x,{text:"Cancle",onClick:function(){e.setState({selected_policy:void 0})}}))))}},{key:"renderCountriesList",value:function(e){var t=[];return e.forEach((function(e){t.push(r.a.createElement("p",{style:{textAlign:"center"}}," Country: ",e," "))})),t}},{key:"renderCountryList",value:function(){var e=this;if(0===this.list_county.length)return r.a.createElement("p",{style:{textAlign:"center"}}," No country selected yet ");return r.a.createElement("div",null,r.a.createElement("h4",{style:Xt}," Countries: "),this.renderCountriesList(this.list_county),r.a.createElement(x,{text:"Add Policy",onClick:function(){var t={};t.CLASSNAME=It,t.DATA={countries:e.list_county},e.list_selected.push(t),e.list_county=[],e.setState({})}}))}},{key:"renderCountries",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("h3",{style:Xt}," Countries Policy "),r.a.createElement("div",null,r.a.createElement(Yt,{title:"County",type:"text",value:this.state.country,onChange:function(t){e.setState({country:t.target.value})}}),r.a.createElement(x,{text:"Add Country",onClick:function(){e.list_county.push(e.state.country),e.setState({country:""})}})),this.renderCountryList())}},{key:"getProducts",value:function(e){var t=this;C("/home/product?store="+e,"GET","",(function(e){null==e?alert("Server Failed"):"Success"===""+e.reason?t.setState({products:e.value}):(alert("Cant get Products from store. please try again later"),v(t.props.history,"/storeManagement","",t.props.location.state))}))}},{key:"renderProducts",value:function(){var e=this;if(0===this.state.products.length)return r.a.createElement("p",{style:{textAlign:"center"}}," No proudtcs in Store");var t=[];return this.state.products.forEach((function(a){t.push(r.a.createElement(j,{onClick:function(){return function(t){e.setState({selected_product:t,selected_amount_max:t.amount})}(a)}},r.a.createElement("h3",{style:{backgroundColor:"#FCA6FF",marginTop:0}}," ",a.productName," "),r.a.createElement("p",null," Amount In Store: ",a.amount," ")))})),t}},{key:"renderSelectedProduct",value:function(){var e=this;if(void 0!==this.state.selected_product){return r.a.createElement("div",null,r.a.createElement("h3",{style:Xt}," ",this.state.selected_product.productName," "),r.a.createElement(Yt,{title:"Min Amount of Product",type:"number",min:1,value:this.state.selected_amount_min,onChange:function(t){var a=parseInt(t.target.value);a<e.state.selected_product.amount?e.setState({selected_amount_min:a}):alert("cant select amount to policy gratter the amount in store")}}),r.a.createElement(Yt,{title:"Max Amount of Product",type:"number",min:1,value:this.state.selected_amount_max,onChange:function(t){var a=parseInt(t.target.value);a<e.state.selected_product.amount?e.setState({selected_amount_max:a}):alert("cant select amount to policy gratter the amount in store")}}),r.a.createElement(x,{text:"Add to Selected Products",onClick:function(){if(parseInt(e.state.selected_amount_min)>parseInt(e.state.selected_amount_max))alert("Min cant be greatter then Max. Cant add product to the policy.");else{var t=e.state.selected_product.productName,a={max:e.state.selected_amount_max,min:e.state.selected_amount_min,productName:e.state.selected_product.productName};e.map_prodcts[t]=a,e.setState({selected_amount_min:0,selected_amount_max:0,selected_product:void 0})}}}))}}},{key:"renderMapProducts",value:function(){var e=this,t=Object.getOwnPropertyNames(this.map_prodcts);if(0!==t.length){var a=[];t.forEach((function(t){var n=e.map_prodcts[t],s=n.max,o=n.min;a.push(r.a.createElement("div",null,r.a.createElement("p",{style:{textAlign:"center"}}," Product: ",t," "),r.a.createElement("p",{style:{textAlign:"center"}}," Min Amount of product: ",o," "),r.a.createElement("p",{style:{textAlign:"center"}}," Max Amount of product: ",s," ")))}));return r.a.createElement("div",null,r.a.createElement(x,{text:"Add Product Policy",onClick:function(){var t={};t.CLASSNAME=qt,t.DATA={amountPerProduct:e.map_prodcts},e.map_prodcts={},e.list_selected.push(t),e.setState({})}}),r.a.createElement("h3",{style:Xt}," Selected Products "),a)}}},{key:"renderProductPolicy",value:function(){if(0===this.state.products.length){var e=this.props.location.state.storeName;this.getProducts(e)}return r.a.createElement("div",null,r.a.createElement("h3",{style:Xt}," Product Policy "),this.renderMapProducts(),this.renderSelectedProduct(),r.a.createElement("div",{style:{padding:4}},this.renderProducts()))}},{key:"render",value:function(){return r.a.createElement(m,null,r.a.createElement(oe,{state:this.props.location.state}),r.a.createElement(D,{title:"Policy Managment"}),r.a.createElement("div",{style:{float:"left",width:"100%"}},this.renderSelectedPolicy()),r.a.createElement("div",{style:{float:"left",width:"100%"}},r.a.createElement("div",{style:{float:"left",width:"24.8%",borderLeft:"1px solid black",height:600}},this.renderColumn1()),r.a.createElement("div",{style:{float:"left",width:"24.8%",borderLeft:"1px solid black",height:600}},this.renderCountries()),r.a.createElement("div",{style:{float:"left",width:"24.8%",borderLeft:"1px solid black",height:600}},this.renderProductPolicy()),r.a.createElement("div",{style:{float:"left",width:"24.7%",borderLeft:"1px solid black",height:600}},this.renderSelectedComplex())))}}]),a}(n.Component),Yt=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement("label",{style:{marginLeft:5,marginRight:12}}," ",this.props.title," ")),r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement("input",{style:{textAlign:"center"},type:this.props.type,min:this.props.min,max:this.props.max,value:this.props.value,onChange:this.props.onChange})))}}]),a}(n.Component),Ht=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement("table",{style:{width:"100%"}},r.a.createElement("tr",{sylte:{textAlign:"center"}},r.a.createElement("th",null,r.a.createElement("button",{style:Jt,onClick:this.props.selectClick}," select ")," "),r.a.createElement("th",null,r.a.createElement("button",{style:Jt,onClick:this.props.comlicatedClick}," complicated ")," "),r.a.createElement("th",null,r.a.createElement("button",{style:zt,onClick:this.props.deleteClick}," X ")," ")))}}]),a}(n.Component),Xt={textAlign:"center",backgroundColor:"lightgray",borderBottom:"1px solid black",marginBottom:5},zt={backgroundColor:"#B38118",margin:5},Jt={backgroundColor:"#0041B3",color:"white"},Zt="Domain.PurchasePolicy.ComposePolicys.AndPolicy",$t=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(l.a)(this,a),(e=t.call(this)).pathname="/viewPolicies",e.state={selected_policy:void 0},e.getPolicy=e.getPolicy.bind(Object(h.a)(e)),e}return Object(i.a)(a,[{key:"renderByComlicated",value:function(e,t){var a=this,n="",s="";switch(e.CLASSNAME){case Zt:n="And Policy",s="#33FF9F";break;case"Domain.PurchasePolicy.ComposePolicys.OrPolicy":n="Or Policy",s="#B2FF4D";break;case"Domain.PurchasePolicy.ComposePolicys.XorPolicy":n="Xor Policy",s="#FFFA70"}var o=e.DATA.policyList,l=[];return o.forEach((function(e){l.push(r.a.createElement("div",null,a.renderByClass(e,!1)))})),r.a.createElement("div",{style:{border:"1px solid black"}},r.a.createElement("h4",{style:{backgroundColor:s,textAlign:"center",marginTop:0}}," ",n," "),r.a.createElement("div",{style:{padding:4}},l))}},{key:"renderByClass",value:function(e,t){var a=e.DATA;switch(e.CLASSNAME){case"Domain.PurchasePolicy.SystemPurchasePolicy":return r.a.createElement("div",{style:{border:"2px solid #5CCCC4",margin:4}},r.a.createElement("h4",{style:{backgroundColor:"#5CCCC4",textAlign:"center",marginTop:0}},"Age Policy"),r.a.createElement("p",{style:{textAlign:"center"}}," Age: ",a.age," "));case"Domain.PurchasePolicy.BasketPurchasePolicy":return r.a.createElement("div",{style:{border:"2px solid #9AB0DB",margin:4}},r.a.createElement("h4",{style:{backgroundColor:"#9AB0DB",textAlign:"center",marginTop:0}},"Store Policy"),r.a.createElement("p",{style:{textAlign:"center"}}," Max Amount: ",a.maxAmount," "));case Zt:case"Domain.PurchasePolicy.ComposePolicys.OrPolicy":case"Domain.PurchasePolicy.ComposePolicys.XorPolicy":return this.renderByComlicated(e,t);case"Domain.PurchasePolicy.UserPurchasePolicy":var n=a.countries;return r.a.createElement("div",{style:{border:"2px solid #B352FF",margin:4}},r.a.createElement("h4",{style:{backgroundColor:"#B352FF",textAlign:"center",marginTop:0}},"Country Policy"),this.renderCountriesList(n));case"Domain.PurchasePolicy.ProductPurchasePolicy":var s=a.amountPerProduct,o=[];return Object.getOwnPropertyNames(s).forEach((function(e){var t=s[e],a=t.min,n=t.max;o.push(r.a.createElement("div",null,r.a.createElement("p",{style:{textAlign:"center"}}," Product: ",e," "),r.a.createElement("p",{style:{textAlign:"center"}}," Min Amount of product: ",a," "),r.a.createElement("p",{style:{textAlign:"center"}}," Max Amount of product: ",n," ")))})),r.a.createElement("div",{style:{border:"2px solid #B0C8FF",margin:4}},r.a.createElement("h4",{style:{backgroundColor:"#B0C8FF",textAlign:"center",marginTop:0}},"Product Policy"),o)}}},{key:"renderCountriesList",value:function(e){var t=[];return e.forEach((function(e){t.push(r.a.createElement("p",{style:{textAlign:"center"}}," Country: ",e," "))})),t}},{key:"getPolicy",value:function(){var e=this,t=this.props.location.state.storeName;C("/store/policy/get?store="+t,"GET","",(function(t){if(null==t)alert("Server Failed");else{var a=""+t.reason;if("Success"===a){console.log(t.value);var n=JSON.parse(t.value);e.setState({selected_policy:n})}else"Store_Not_Found\u200f"===a&&(alert("Store Not found. Back to the prev page"),v(e.props.history,e.props.location.fromPath,e.pathname,e.props.location.state))}}))}},{key:"checkEmptyPolicy",value:function(){var e=this.state.selected_policy;return void 0===e||e.CLASSNAME===Zt&&0===e.DATA.policyList.length}},{key:"renderPolicy",value:function(){return void 0===this.state.selected_policy&&this.getPolicy(),this.checkEmptyPolicy()?r.a.createElement("p",{style:{textAlign:"center"}}," No Policy To Store Yet "):void 0!==this.state.selected_policy?r.a.createElement("div",{style:{width:"40%",paddingLeft:425}},r.a.createElement("h2",{style:Kt}," Policy "),this.renderByClass(this.state.selected_policy,!1)):void 0}},{key:"render",value:function(){var e=this,t=this.props.location.state.storeName;return r.a.createElement(m,null,r.a.createElement(oe,{state:this.props.location.state}),r.a.createElement(D,{title:"View Policy "+t}),this.renderPolicy(),r.a.createElement("div",{style:{float:"left",width:"100%"}},r.a.createElement(x,{text:"Back",onClick:function(){v(e.props.history,e.props.location.fromPath,e.pathname,e.props.location.state)}})))}}]),a}(n.Component),Kt={textAlign:"center",backgroundColor:"lightgray",borderBottom:"1px solid black",marginBottom:5},Qt=(a(130),a(39),function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={id:-1,name:"",password:"",error:"Cannot register Admin",success:"Registered Admin"},n.handleChangeName=n.handleChangeName.bind(Object(h.a)(n)),n.handleChangePassword=n.handleChangePassword.bind(Object(h.a)(n)),n.handleConnect=n.handleConnect.bind(Object(h.a)(n)),n.handleGetId=n.handleGetId.bind(Object(h.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(h.a)(n)),n.handleReceived=n.handleReceived.bind(Object(h.a)(n)),n}return Object(i.a)(a,[{key:"handleConnect",value:function(){C("/home/connect","GET","",this.handleGetId)}},{key:"handleGetId",value:function(e){"Success"!==""+e.reason?alert(this.state.error):(this.setState({id:e.value}),alert(this.state.success),v(this.props.history,"/","",{id:this.state.id}))}},{key:"handleChangeName",value:function(e){this.setState({name:e.target.value})}},{key:"handleChangePassword",value:function(e){this.setState({password:e.target.value})}},{key:"handleSubmit",value:function(){var e=this.state.name,t=this.state.password;C("/admin/init","POST",{name:e,password:t},this.handleReceived)}},{key:"handleReceived",value:function(e){e&&e.value?this.handleConnect():alert(this.state.error)}},{key:"render",value:function(){return r.a.createElement(m,null,r.a.createElement(D,{title:"Register Admin"}),r.a.createElement("div",null,r.a.createElement(ge,{title:"User Name:",type:"text",value:this.state.name,onChange:this.handleChangeName}),r.a.createElement(ge,{title:"Password:",type:"password",value:this.state.password,onChange:this.handleChangePassword}),r.a.createElement(x,{text:"Submit",onClick:this.handleSubmit})))}}]),a}(n.Component)),ea=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(l.a)(this,a),(e=t.call(this)).pathname="/admin/watchRevenu",e.state={day_income:void 0,i_day:void 0,i_month:void 0,i_year:void 0,s_day:void 0,s_month:void 0,s_year:void 0,selected_day_income:void 0},e.get_Date=e.get_Date.bind(Object(h.a)(e)),e.pprint_Date=e.pprint_Date.bind(Object(h.a)(e)),e.render_SelectedDate=e.render_SelectedDate.bind(Object(h.a)(e)),e.onChange_day=e.onChange_day.bind(Object(h.a)(e)),e.onChange_month=e.onChange_month.bind(Object(h.a)(e)),e.onChange_year=e.onChange_year.bind(Object(h.a)(e)),e.render_SelectedIncome=e.render_SelectedIncome.bind(Object(h.a)(e)),e}return Object(i.a)(a,[{key:"get_Date",value:function(){var e=this;if(void 0===this.state.day){var t=new Date,a=t.getDate(),n=t.getMonth()+1,r=t.getFullYear(),s=this.props.location.state.id;C("/admin/todayRevenue?id="+s,"GET","",(function(t){if(t){var s=""+t.reason;"Success"===s?e.setState({day:a,month:n,year:r,i_day:a,i_month:n,i_year:r,day_income:t.value}):"Not_Found"===s?e.setState({day:a,month:n,year:r,i_day:a,i_month:n,i_year:r,day_income:0}):"NOT_ADMIN"===s?alert("Ha Great For You, you cant fool us!!!"):alert(s)}}))}}},{key:"pprint_Date",value:function(){return this.state.day+"."+this.state.month+"."+this.state.year}},{key:"onChange_day",value:function(e){parseInt(e.target.value)>31?alert("Cant Enter a day gretter then 31"):parseInt(e.target.value)<1?alert("Cant Enter a day lower then 1"):this.setState({i_day:parseInt(e.target.value)})}},{key:"onChange_month",value:function(e){parseInt(e.target.value)>12?alert("Cant Enter a month gretter then 12"):parseInt(e.target.value)<1?alert("Cant Enter a month lower then 1"):this.setState({i_month:parseInt(e.target.value)})}},{key:"onChange_year",value:function(e){parseInt(e.target.value)>9999?alert("Cant Enter a year gretter then 9999"):parseInt(e.target.value)<1?alert("Cant Enter a year lower then 1"):this.setState({i_year:parseInt(e.target.value)})}},{key:"render_SelectedIncome",value:function(){if(void 0!==this.state.selected_day_income)return r.a.createElement("div",{style:{float:"left",width:"30%",marginLeft:"35%"}},r.a.createElement(j,null,r.a.createElement("h2",{style:{marginTop:0,border:"1px solid black",backgroundColor:"#63FFA7"}},"Day Income "),r.a.createElement("h3",null,"  ",this.state.s_day+"."+this.state.s_month+"."+this.state.s_year," "),r.a.createElement("h3",null," ",this.state.selected_day_income," $")))}},{key:"render_SelectedDate",value:function(){var e=this;return r.a.createElement("div",{style:{float:"left",width:"100%",paddingTop:"15px"}},r.a.createElement("div",{style:{float:"left",width:"60%",paddingLeft:"20%"}},r.a.createElement("div",{style:{float:"left",width:"32%",border:"2px solid black",textAlign:"center"}},r.a.createElement("p",{style:{marginTop:0,marginBottom:10,fontSize:21,width:"99.7%",backgroundColor:"#FFF9A8"}}," Day "),r.a.createElement("input",{style:{textAlign:"center",marginBottom:10,width:"50%"},type:"number",min:1,max:31,value:this.state.i_day,onChange:this.onChange_day})),r.a.createElement("div",{style:{float:"left",width:"32%",border:"2px solid black",textAlign:"center"}},r.a.createElement("p",{style:{marginTop:0,marginBottom:10,fontSize:21,width:"99.7%",backgroundColor:"#FFF9A8"}}," Month "),r.a.createElement("input",{style:{textAlign:"center",marginBottom:10,width:"50%"},type:"number",min:1,max:12,value:this.state.i_month,onChange:this.onChange_month})),r.a.createElement("div",{style:{float:"left",width:"32%",border:"2px solid black",textAlign:"center"}},r.a.createElement("p",{style:{marginTop:0,marginBottom:10,fontSize:21,width:"99.7%",backgroundColor:"#FFF9A8"}}," Year "),r.a.createElement("input",{style:{textAlign:"center",marginBottom:10,width:"50%"},type:"number",min:1,max:9999,value:this.state.i_year,onChange:this.onChange_year}))),r.a.createElement("div",{style:{float:"left",width:"100%"}},r.a.createElement(x,{text:"View Date Income",onClick:function(t){if(void 0!=e.state.year&&e.state.year<e.state.i_year)alert("Cant Select A Year greater then the current Year");else if(void 0!=e.state.year&&e.state.month<e.state.i_month)alert("Cant Select A Month greater then the current Month");else if(void 0!=e.state.year&&e.state.day<e.state.i_day)alert("Cant Select A Day greater then the current Day");else{var a={day:e.state.i_day,month:e.state.i_month,year:e.state.i_year},n=e.props.location.state.id;C("/admin/daysRevenue?id="+n,"POST",a,(function(t){if(t){var a=""+t.reason;"Success"===a?e.setState({s_year:e.state.i_year,s_month:e.state.i_month,s_day:e.state.i_day,selected_day_income:t.value,i_year:e.state.year,i_month:e.state.month,i_day:e.state.day}):"INVALID_DATE"===a?alert("The date inserted isnt valid Date"):"Not_Found"===a?e.setState({s_year:e.state.i_year,s_month:e.state.i_month,s_day:e.state.i_day,selected_day_income:0,i_year:e.state.year,i_month:e.state.month,i_day:e.state.day}):"NOT_ADMIN"===a?alert("Ha Great For You, you cant fool us!!!"):alert("In Day renenu with "+a)}}))}}}),this.render_SelectedIncome()))}},{key:"render",value:function(){return this.get_Date(),r.a.createElement(m,null,r.a.createElement(oe,{state:this.props.location.state}),r.a.createElement(D,{title:"System Revenu"}),r.a.createElement("body",null,r.a.createElement("div",{style:{float:"left",width:"30%",textAlign:"center",border:"1px solid black",marginLeft:"35%"}},r.a.createElement(j,null,r.a.createElement("h2",{style:{marginTop:0,border:"1px solid black",backgroundColor:"#D4E6FF"}},"Day Income "),r.a.createElement("h3",null," ",this.pprint_Date()," "),r.a.createElement("h3",null," ",this.state.day_income," $"))),this.render_SelectedDate()))}}]),a}(n.Component),ta=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement(d.b,{history:y},r.a.createElement(d.c,null,r.a.createElement(d.a,{path:"/",component:ye,exact:!0}),r.a.createElement(d.a,{path:"/admin/watchDailyUsage",component:Object(d.d)(T)}),r.a.createElement(d.a,{path:"/admin/watchRevenu",component:Object(d.d)(ea)}),r.a.createElement(d.a,{path:"/admin/storehistory",component:Object(d.d)(Dt),exact:!0}),r.a.createElement(d.a,{path:"/admin",component:Object(d.d)(Qt),exact:!0}),r.a.createElement(d.a,{path:"/register",component:Object(d.d)(be)}),r.a.createElement(d.a,{path:"/searchAndFilter",component:Object(d.d)(it)}),r.a.createElement(d.a,{path:"/login",component:Object(d.d)(Se)}),r.a.createElement(d.a,{path:"/storeOwnerWatchHistory",component:Object(d.d)(ke)}),r.a.createElement(d.a,{path:"/userWatchPurchasesHistory",component:Object(d.d)(Ae)}),r.a.createElement(d.a,{path:"/viewStoresAndProducts",component:Object(d.d)(Oe)}),r.a.createElement(d.a,{path:"/viewMyCart",component:Object(d.d)(je)}),r.a.createElement(d.a,{path:"/register",component:Object(d.d)(be)}),r.a.createElement(d.a,{path:"/login",component:Object(d.d)(Se)}),r.a.createElement(d.a,{path:"/addToCart",component:Object(d.d)(Te)}),r.a.createElement(d.a,{path:"/productsDelete",component:Object(d.d)(Me)}),r.a.createElement(d.a,{path:"/sendRequest",component:Object(d.d)(qe)}),r.a.createElement(d.a,{path:"/buyCart",component:Object(d.d)(ft)}),r.a.createElement(d.a,{path:"/openStore",component:Object(d.d)(Ge)}),r.a.createElement(d.a,{path:"/manageProducts",component:Object(d.d)(Ye)}),r.a.createElement(d.a,{path:"/manageDiscount",component:Object(d.d)(Ze)}),r.a.createElement(d.a,{path:"/viewDiscounts",component:Object(d.d)(Bt)}),r.a.createElement(d.a,{path:"/storeManagement",component:Object(d.d)(st)}),r.a.createElement(d.a,{path:"/storeMenu",component:Object(d.d)(dt)}),r.a.createElement(d.a,{path:"/removeManagerFromStore",component:Object(d.d)(at)}),r.a.createElement(d.a,{path:"/addManagerToStore",component:Object(d.d)(vt)}),r.a.createElement(d.a,{path:"/addOwnerToStore",component:Object(d.d)(pt)}),r.a.createElement(d.a,{path:"/approveOwnerToStore",component:Object(d.d)(gt)}),r.a.createElement(d.a,{path:"/editManagerPermissions",component:Object(d.d)(Ct)}),r.a.createElement(d.a,{path:"/viewAndReplyRequests",component:Object(d.d)(At)}),r.a.createElement(d.a,{path:"/watchUserAndStoreHistory",component:Object(d.d)(Dt)}),r.a.createElement(d.a,{path:"/editProduct",component:Object(d.d)(Nt)}),r.a.createElement(d.a,{path:"/policy",component:Object(d.d)(Vt)}),r.a.createElement(d.a,{path:"/viewPolicies",component:Object(d.d)($t)}),r.a.createElement(d.a,{path:"/subscribe",component:Object(d.d)(Tt)})))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(ta,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},24:function(e,t,a){e.exports=a.p+"static/media/store.effb3e87.jpg"},71:function(e,t,a){e.exports=a.p+"static/media/404_logo.31ca3259.jpg"},74:function(e,t,a){e.exports=a(135)},79:function(e,t,a){},85:function(e,t){},87:function(e,t){}},[[74,1,2]]]);
//# sourceMappingURL=main.5a102dea.chunk.js.map